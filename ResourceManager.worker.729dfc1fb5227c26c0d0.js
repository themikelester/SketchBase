!function(e){var t={};function r(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(a,n,function(t){return e[t]}.bind(null,n));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r.r(t);var a,n,o,i,s,u,l,c,f,h,m,d,x,U,g;!function(e){e[e.VertexArrayObject=1]="VertexArrayObject",e[e.TextureFloat=2]="TextureFloat",e[e.TextureHalf=4]="TextureHalf",e[e.TextureFloatLinearFiltering=8]="TextureFloatLinearFiltering",e[e.TextureHalfLinearFiltering=16]="TextureHalfLinearFiltering",e[e.TextureWrite=32]="TextureWrite",e[e.ShaderDerivatives=64]="ShaderDerivatives",e[e.Instancing=128]="Instancing",e[e.AnistropicFiltering=256]="AnistropicFiltering",e[e.ShaderGlsl100=512]="ShaderGlsl100",e[e.ShaderGlsl300=1024]="ShaderGlsl300"}(a||(a={})),function(e){e[e.Undefined=0]="Undefined",e[e.Float=1]="Float",e[e.Float2=2]="Float2",e[e.Float3=3]="Float3",e[e.Float4=4]="Float4",e[e.Int=5]="Int",e[e.Int2=6]="Int2",e[e.Int3=7]="Int3",e[e.Int4=8]="Int4",e[e.Uint=9]="Uint",e[e.Uint2=10]="Uint2",e[e.Uint3=11]="Uint3",e[e.Uint4=12]="Uint4",e[e.Short=13]="Short",e[e.Short2=14]="Short2",e[e.Short3=15]="Short3",e[e.Short4=16]="Short4",e[e.Ushort=17]="Ushort",e[e.Ushort2=18]="Ushort2",e[e.Ushort3=19]="Ushort3",e[e.Ushort4=20]="Ushort4",e[e.Char=21]="Char",e[e.Char2=22]="Char2",e[e.Char3=23]="Char3",e[e.Char4=24]="Char4",e[e.Uchar=25]="Uchar",e[e.Uchar2=26]="Uchar2",e[e.Uchar3=27]="Uchar3",e[e.Uchar4=28]="Uchar4",e[e.Half=29]="Half",e[e.Half2=30]="Half2",e[e.Half3=31]="Half3",e[e.Half4=32]="Half4",e[e.Float3x3=33]="Float3x3",e[e.Float3x4=34]="Float3x4",e[e.Float4x4=35]="Float4x4",e[e.Texture2D=240]="Texture2D",e[e.Texture3D=241]="Texture3D",e[e.TextureCube=242]="TextureCube",e[e.Short_Norm=256]="Short_Norm",e[e.Short2_Norm=257]="Short2_Norm",e[e.Short3_Norm=258]="Short3_Norm",e[e.Short4_Norm=259]="Short4_Norm",e[e.Ushort_Norm=260]="Ushort_Norm",e[e.Ushort2_Norm=261]="Ushort2_Norm",e[e.Ushort3_Norm=262]="Ushort3_Norm",e[e.Ushort4_Norm=263]="Ushort4_Norm",e[e.Char_Norm=264]="Char_Norm",e[e.Char2_Norm=265]="Char2_Norm",e[e.Char3_Norm=266]="Char3_Norm",e[e.Char4_Norm=267]="Char4_Norm",e[e.Uchar_Norm=268]="Uchar_Norm",e[e.Uchar2_Norm=269]="Uchar2_Norm",e[e.Uchar3_Norm=270]="Uchar3_Norm",e[e.Uchar4_Norm=271]="Uchar4_Norm"}(n||(n={})),function(e){e[e.Texture2D=240]="Texture2D",e[e.Texture3D=241]="Texture3D",e[e.TextureCube=242]="TextureCube"}(o||(o={})),function(e){e[e.Undefined=0]="Undefined",e[e.U565=1]="U565",e[e.U8=2]="U8",e[e.U8_sRGB=3]="U8_sRGB",e[e.U8x2=4]="U8x2",e[e.U8x2_sRGB=5]="U8x2_sRGB",e[e.U8x3=6]="U8x3",e[e.U8x3_sRGB=7]="U8x3_sRGB",e[e.U8x4=8]="U8x4",e[e.U8x4_sRGB=9]="U8x4_sRGB",e[e.U10_10_10_2=10]="U10_10_10_2",e[e.F11_11_10=11]="F11_11_10",e[e.F16=12]="F16",e[e.F16x2=13]="F16x2",e[e.F16x3=14]="F16x3",e[e.F16x4=15]="F16x4",e[e.F32x2=16]="F32x2",e[e.F32x3=17]="F32x3",e[e.F32x4=18]="F32x4",e[e.Depth32=19]="Depth32",e[e.Depth24Stencil8=20]="Depth24Stencil8"}(i||(i={})),function(e){e[e.Nearest=0]="Nearest",e[e.Linear=1]="Linear"}(s||(s={})),function(e){e[e.Clamp=0]="Clamp",e[e.Repeat=1]="Repeat"}(u||(u={})),function(e){e[e.Never=0]="Never",e[e.Less=1]="Less",e[e.Equal=2]="Equal",e[e.LessEqual=3]="LessEqual",e[e.Greater=4]="Greater",e[e.NotEqual=5]="NotEqual",e[e.GreaterEqual=6]="GreaterEqual",e[e.Always=7]="Always"}(l||(l={})),function(e){e[e.Points=0]="Points",e[e.Lines=1]="Lines",e[e.LineLoop=2]="LineLoop",e[e.LineStrip=3]="LineStrip",e[e.Triangles=4]="Triangles",e[e.TriangleStrip=5]="TriangleStrip",e[e.TriangleFan=6]="TriangleFan"}(c||(c={})),function(e){e[e.Undefined=0]="Undefined",e[e.Uniform=1]="Uniform",e[e.Vertex=2]="Vertex",e[e.Index=3]="Index",e[e.Readback=4]="Readback"}(f||(f={})),function(e){e[e.Undefined=0]="Undefined",e[e.UniformBuffer=1]="UniformBuffer",e[e.Texture=2]="Texture"}(h||(h={})),function(e){e[e.None=0]="None",e[e.Static=1]="Static",e[e.Dynamic=2]="Dynamic"}(m||(m={})),function(e){e[e.None=0]="None",e[e.Back=1]="Back",e[e.Front=2]="Front"}(d||(d={})),function(e){e[e.Zero=0]="Zero",e[e.One=1]="One",e[e.Source=2]="Source",e[e.OneMinusSource=3]="OneMinusSource"}(x||(x={})),function(e){e[e.Vertex=0]="Vertex",e[e.Instance=1]="Instance"}(U||(U={}));function p(e){return null!=e}!function(e){e[e.Initializing=0]="Initializing",e[e.LoadingAsync=1]="LoadingAsync",e[e.LoadingSync=2]="LoadingSync",e[e.Loaded=3]="Loaded",e[e.Unloaded=4]="Unloaded",e[e.Failed=5]="Failed"}(g||(g={}));const _={Texture:new class{async loadAsync(e,t){return e.imageBuffer=await t.arrayBuffer(),[e.imageBuffer]}loadSync(e,t){if(e.imageBitmap)return e.texture=t.gfxDevice?t.gfxDevice.createTexture(e.uri,{usage:m.Static,type:o.Texture2D,format:i.U8x4,maxAnistropy:16,defaultWrapS:u.Clamp,defaultWrapT:u.Clamp},e.imageBitmap):-1,e.width=e.imageBitmap.width,e.height=e.imageBitmap.height,e.imageBitmap.close(),delete e.imageBitmap,!0;if(e.imageBuffer){const t=new Blob([e.imageBuffer],{type:"image/jpeg"}),r=window.URL.createObjectURL(t);delete e.imageBuffer,e.imageElement=new Image,e.imageElement.src=r}return!(!p(e.imageElement)||!e.imageElement.complete)&&(e.texture=t.gfxDevice?t.gfxDevice.createTexture(e.uri,{usage:m.Static,type:o.Texture2D,format:i.U8x4,maxAnistropy:16},e.imageElement):-1,e.width=e.imageElement.width,e.height=e.imageElement.height,delete e.imageElement,!0)}unload(e,t){p(e.texture)&&t.gfxDevice&&t.gfxDevice.removeTexture(e.texture),p(e.imageBitmap)&&e.imageBitmap.close()}}},F=self;t.default={};onmessage=async e=>{S.onMessage(e)};const S=new class{constructor(){this.transferList=[],this.processed=[],setInterval(()=>this.update(),33)}async onMessage(e){const t=e.data;for(const e of t)this.loadResource(e)}async loadResource(e){try{const t=_[e.type];if(!t)throw new Error("No loader found for resource type "+e.type);const r=await fetch(e.uri);if(200!=r.status)throw new Error("Fetch failed. Result "+r.status);const a=await r.blob(),n=await t.loadAsync(e,a);Array.prototype.push.apply(this.transferList,n),e.status=g.LoadingSync}catch(t){e.error=t.message,e.status=g.Failed,console.warn("Resource "+e.uri+" failed to load:",t)}this.processed.push(e)}update(){this.processed.length>0&&(F.postMessage(this.processed,this.transferList),this.transferList.length=0,this.processed.length=0)}}}]);