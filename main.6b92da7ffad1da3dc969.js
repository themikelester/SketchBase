!function(e){function t(t){for(var r,a,i=t[0],o=t[1],s=0,c=[];s<i.length;s++)a=i[s],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&c.push(n[a][0]),n[a]=0;for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r]);for(u&&u(t);c.length;)c.shift()()}var r={},n={0:0};function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.e=function(e){var t=[],r=n[e];if(0!==r)if(r)t.push(r[2]);else{var i=new Promise((function(t,a){r=n[e]=[t,a]}));t.push(r[2]=i);var o,s=document.createElement("script");s.charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.src=function(e){return a.p+""+({}[e]||e)+"."+{1:"bd4a95f6acb3a342b25c"}[e]+".js"}(e);var u=new Error;o=function(t){s.onerror=s.onload=null,clearTimeout(c);var r=n[e];if(0!==r){if(r){var a=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+a+": "+i+")",u.name="ChunkLoadError",u.type=a,u.request=i,r[1](u)}n[e]=void 0}};var c=setTimeout((function(){o({type:"timeout",target:s})}),12e4);s.onerror=s.onload=o,document.head.appendChild(s)}return Promise.all(t)},a.m=e,a.c=r,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a.oe=function(e){throw console.error(e),e};var i=window.webpackJsonp=window.webpackJsonp||[],o=i.push.bind(i);i.push=t,i=i.slice();for(var s=0;s<i.length;s++)t(i[s]);var u=o;a(a.s=8)}({0:function(e,t){e.exports={sourceCode:"#version 300 es\nprecision mediump float;in vec2 a_pos;out vec3 v_worldPos;uniform float u_gridRadius;uniform mat4 g_viewProj;void main(){v_worldPos=vec3(a_pos.x,0,a_pos.y)*u_gridRadius;gl_Position=g_viewProj*vec4(v_worldPos,1.);}",uniforms:{u_gridRadius:{variableType:"float",variableName:"u_gridRadius"},g_viewProj:{variableType:"mat4",variableName:"g_viewProj"}},consts:{}}},1:function(e,t){e.exports={sourceCode:"#version 300 es\nprecision mediump float;in vec3 v_worldPos;out vec4 o_fragColor;uniform vec4 u_baseColor;uniform vec4 u_lineColor;uniform float u_gridUnit;uniform float u_gridRadius;void main(){vec2 coord=v_worldPos.xz/u_gridUnit;vec2 grid=abs(fract(coord-0.5)-0.5)/fwidth(coord);float line=min(grid.x,grid.y);float lineAmount=1.-min(line,1.);vec4 color=mix(u_baseColor,u_lineColor,lineAmount);float opacity=smoothstep(u_gridRadius*0.7,u_gridRadius,length(v_worldPos));color=mix(color,vec4(0),opacity);o_fragColor=color;}",uniforms:{u_baseColor:{variableType:"vec4",variableName:"u_baseColor"},u_lineColor:{variableType:"vec4",variableName:"u_lineColor"},u_gridUnit:{variableType:"float",variableName:"u_gridUnit"},u_gridRadius:{variableType:"float",variableName:"u_gridRadius"}},consts:{}}},8:function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"create",(function(){return U})),r.d(n,"clone",(function(){return E})),r.d(n,"copy",(function(){return S})),r.d(n,"fromValues",(function(){return R})),r.d(n,"set",(function(){return A})),r.d(n,"identity",(function(){return N})),r.d(n,"transpose",(function(){return L})),r.d(n,"invert",(function(){return P})),r.d(n,"adjoint",(function(){return I})),r.d(n,"determinant",(function(){return C})),r.d(n,"multiply",(function(){return O})),r.d(n,"translate",(function(){return B})),r.d(n,"scale",(function(){return D})),r.d(n,"rotate",(function(){return G})),r.d(n,"rotateX",(function(){return j})),r.d(n,"rotateY",(function(){return V})),r.d(n,"rotateZ",(function(){return H})),r.d(n,"fromTranslation",(function(){return z})),r.d(n,"fromScaling",(function(){return k})),r.d(n,"fromRotation",(function(){return q})),r.d(n,"fromXRotation",(function(){return X})),r.d(n,"fromYRotation",(function(){return W})),r.d(n,"fromZRotation",(function(){return $})),r.d(n,"fromRotationTranslation",(function(){return Y})),r.d(n,"fromQuat2",(function(){return Q})),r.d(n,"getTranslation",(function(){return Z})),r.d(n,"getScaling",(function(){return J})),r.d(n,"getRotation",(function(){return K})),r.d(n,"fromRotationTranslationScale",(function(){return ee})),r.d(n,"fromRotationTranslationScaleOrigin",(function(){return te})),r.d(n,"fromQuat",(function(){return re})),r.d(n,"frustum",(function(){return ne})),r.d(n,"perspective",(function(){return ae})),r.d(n,"perspectiveFromFieldOfView",(function(){return ie})),r.d(n,"ortho",(function(){return oe})),r.d(n,"lookAt",(function(){return se})),r.d(n,"targetTo",(function(){return ue})),r.d(n,"str",(function(){return ce})),r.d(n,"frob",(function(){return fe})),r.d(n,"add",(function(){return he})),r.d(n,"subtract",(function(){return le})),r.d(n,"multiplyScalar",(function(){return de})),r.d(n,"multiplyScalarAndAdd",(function(){return pe})),r.d(n,"exactEquals",(function(){return me})),r.d(n,"equals",(function(){return ge})),r.d(n,"mul",(function(){return be})),r.d(n,"sub",(function(){return xe}));var a={};r.r(a),r.d(a,"create",(function(){return ye})),r.d(a,"clone",(function(){return ve})),r.d(a,"length",(function(){return _e})),r.d(a,"fromValues",(function(){return Me})),r.d(a,"copy",(function(){return we})),r.d(a,"set",(function(){return Fe})),r.d(a,"add",(function(){return Te})),r.d(a,"subtract",(function(){return Ue})),r.d(a,"multiply",(function(){return Ee})),r.d(a,"divide",(function(){return Se})),r.d(a,"ceil",(function(){return Re})),r.d(a,"floor",(function(){return Ae})),r.d(a,"min",(function(){return Ne})),r.d(a,"max",(function(){return Le})),r.d(a,"round",(function(){return Pe})),r.d(a,"scale",(function(){return Ie})),r.d(a,"scaleAndAdd",(function(){return Ce})),r.d(a,"distance",(function(){return Oe})),r.d(a,"squaredDistance",(function(){return Be})),r.d(a,"squaredLength",(function(){return De})),r.d(a,"negate",(function(){return Ge})),r.d(a,"inverse",(function(){return je})),r.d(a,"normalize",(function(){return Ve})),r.d(a,"dot",(function(){return He})),r.d(a,"cross",(function(){return ze})),r.d(a,"lerp",(function(){return ke})),r.d(a,"hermite",(function(){return qe})),r.d(a,"bezier",(function(){return Xe})),r.d(a,"random",(function(){return We})),r.d(a,"transformMat4",(function(){return $e})),r.d(a,"transformMat3",(function(){return Ye})),r.d(a,"transformQuat",(function(){return Qe})),r.d(a,"rotateX",(function(){return Ze})),r.d(a,"rotateY",(function(){return Je})),r.d(a,"rotateZ",(function(){return Ke})),r.d(a,"angle",(function(){return et})),r.d(a,"zero",(function(){return tt})),r.d(a,"str",(function(){return rt})),r.d(a,"exactEquals",(function(){return nt})),r.d(a,"equals",(function(){return at})),r.d(a,"sub",(function(){return ot})),r.d(a,"mul",(function(){return st})),r.d(a,"div",(function(){return ut})),r.d(a,"dist",(function(){return ct})),r.d(a,"sqrDist",(function(){return ft})),r.d(a,"len",(function(){return ht})),r.d(a,"sqrLen",(function(){return lt})),r.d(a,"forEach",(function(){return dt}));var i={};r.r(i),r.d(i,"create",(function(){return pt})),r.d(i,"clone",(function(){return mt})),r.d(i,"fromValues",(function(){return gt})),r.d(i,"copy",(function(){return bt})),r.d(i,"set",(function(){return xt})),r.d(i,"add",(function(){return yt})),r.d(i,"subtract",(function(){return vt})),r.d(i,"multiply",(function(){return _t})),r.d(i,"divide",(function(){return Mt})),r.d(i,"ceil",(function(){return wt})),r.d(i,"floor",(function(){return Ft})),r.d(i,"min",(function(){return Tt})),r.d(i,"max",(function(){return Ut})),r.d(i,"round",(function(){return Et})),r.d(i,"scale",(function(){return St})),r.d(i,"scaleAndAdd",(function(){return Rt})),r.d(i,"distance",(function(){return At})),r.d(i,"squaredDistance",(function(){return Nt})),r.d(i,"length",(function(){return Lt})),r.d(i,"squaredLength",(function(){return Pt})),r.d(i,"negate",(function(){return It})),r.d(i,"inverse",(function(){return Ct})),r.d(i,"normalize",(function(){return Ot})),r.d(i,"dot",(function(){return Bt})),r.d(i,"cross",(function(){return Dt})),r.d(i,"lerp",(function(){return Gt})),r.d(i,"random",(function(){return jt})),r.d(i,"transformMat4",(function(){return Vt})),r.d(i,"transformQuat",(function(){return Ht})),r.d(i,"zero",(function(){return zt})),r.d(i,"str",(function(){return kt})),r.d(i,"exactEquals",(function(){return qt})),r.d(i,"equals",(function(){return Xt})),r.d(i,"sub",(function(){return Wt})),r.d(i,"mul",(function(){return $t})),r.d(i,"div",(function(){return Yt})),r.d(i,"dist",(function(){return Qt})),r.d(i,"sqrDist",(function(){return Zt})),r.d(i,"len",(function(){return Jt})),r.d(i,"sqrLen",(function(){return Kt})),r.d(i,"forEach",(function(){return er}));const o="80fb6be2c8a5ffd2821a604f486bf9c21fc32619",s=(o.slice(0,8),new WeakMap);function u(e,t,r,n){if(n&&!["string","symbol"].includes(typeof n))throw new TypeError;(h(r,n)||function(e,t){const r=s.get(e)||new Map;s.set(e,r);const n=r.get(t)||new Map;return r.set(t,n),n}(r,n)).set(e,t)}function c(e,t,r){return f(e,t,r)?f(e,t,r):Object.getPrototypeOf(t)?c(e,Object.getPrototypeOf(t),r):void 0}function f(e,t,r){if(void 0===t)throw new TypeError;const n=h(t,r);return n&&n.get(e)}function h(e,t){return s.get(e)&&s.get(e).get(t)}const l={decorate:function(e,t,r,n){if(0===e.length)throw new TypeError;return"function"==typeof t?function(e,t){return e.reverse().forEach(e=>{const r=e(t);r&&(t=r)}),t}(e,t):void 0!==r?function(e,t,r,n){return e.reverse().forEach(e=>{n=e(t,r,n)||n}),n}(e,t,r,n):void 0},defineMetadata:function(e,t,r,n){return u(e,t,r,n)},getMetadata:function(e,t,r){return c(e,t,r)},getOwnMetadata:function(e,t,r){return f(e,t,r)},hasMetadata:function(e,t,r){return!!c(e,t,r)},hasOwnMetadata:function(e,t,r){return!!f(e,t,r)},metadata:function(e,t){return function(r,n){u(e,t,r,n)}}};function d(e,t=""){if(!e){const e=new Error("Assert fail: "+t);throw console.error(e.stack),e}}function p(e,t){if(null!=e)return e;throw new Error(b(t,"Missing object"))}function m(e,t){if("string"==typeof e)return e;throw new Error(b(t,"Expected Object to be a non-null string"))}function g(e){return null!=e}function b(e,t){return null!=e?e:t}Object.assign(Reflect,l);class x{constructor(){this.vars={},this.funcs={}}}const y={},v=e=>{if(y[e.name]){const t=y[e.name].cons.prototype,r=e.prototype;t!=r&&function(e,t){const r=new Set(Object.getOwnPropertyNames(e)),n=new Set(Object.getOwnPropertyNames(t));for(const r of Object.getOwnPropertyNames(t)){const n=Object.getOwnPropertyDescriptor(t,r);n&&n.configurable&&Object.defineProperty(e,r,n)}for(const t of r)if(!n.has(t))try{delete e[t]}catch(e){}}(t,r)}else y[e.name]=new x,y[e.name].cons=e},_=(e,t)=>{const r=e.constructor.name;v(e.constructor);const n=l.getMetadata("design:type",e,t);d("Object"!==n.name,"Unable to determine the type of "+t.toString()+" for object "+r+". Try explicitly setting the type."),y[r].vars[m(t)]={type:n.name,metadata:{}}},M=(e,t)=>{const r=e.constructor.name;v(e.constructor);const n=l.getMetadata("design:paramtypes",e,t),a=l.getMetadata("design:returntype",e,t);y[r].funcs[m(t)]={paramTypes:n.map(e=>e.name),returnType:a?a.name:"null"}};var w=1e-6,F="undefined"!=typeof Float32Array?Float32Array:Array,T=Math.random;Math.PI;function U(){var e=new F(16);return F!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function E(e){var t=new F(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function S(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function R(e,t,r,n,a,i,o,s,u,c,f,h,l,d,p,m){var g=new F(16);return g[0]=e,g[1]=t,g[2]=r,g[3]=n,g[4]=a,g[5]=i,g[6]=o,g[7]=s,g[8]=u,g[9]=c,g[10]=f,g[11]=h,g[12]=l,g[13]=d,g[14]=p,g[15]=m,g}function A(e,t,r,n,a,i,o,s,u,c,f,h,l,d,p,m,g){return e[0]=t,e[1]=r,e[2]=n,e[3]=a,e[4]=i,e[5]=o,e[6]=s,e[7]=u,e[8]=c,e[9]=f,e[10]=h,e[11]=l,e[12]=d,e[13]=p,e[14]=m,e[15]=g,e}function N(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function L(e,t){if(e===t){var r=t[1],n=t[2],a=t[3],i=t[6],o=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=i,e[11]=t[14],e[12]=a,e[13]=o,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function P(e,t){var r=t[0],n=t[1],a=t[2],i=t[3],o=t[4],s=t[5],u=t[6],c=t[7],f=t[8],h=t[9],l=t[10],d=t[11],p=t[12],m=t[13],g=t[14],b=t[15],x=r*s-n*o,y=r*u-a*o,v=r*c-i*o,_=n*u-a*s,M=n*c-i*s,w=a*c-i*u,F=f*m-h*p,T=f*g-l*p,U=f*b-d*p,E=h*g-l*m,S=h*b-d*m,R=l*b-d*g,A=x*R-y*S+v*E+_*U-M*T+w*F;return A?(A=1/A,e[0]=(s*R-u*S+c*E)*A,e[1]=(a*S-n*R-i*E)*A,e[2]=(m*w-g*M+b*_)*A,e[3]=(l*M-h*w-d*_)*A,e[4]=(u*U-o*R-c*T)*A,e[5]=(r*R-a*U+i*T)*A,e[6]=(g*v-p*w-b*y)*A,e[7]=(f*w-l*v+d*y)*A,e[8]=(o*S-s*U+c*F)*A,e[9]=(n*U-r*S-i*F)*A,e[10]=(p*M-m*v+b*x)*A,e[11]=(h*v-f*M-d*x)*A,e[12]=(s*T-o*E-u*F)*A,e[13]=(r*E-n*T+a*F)*A,e[14]=(m*y-p*_-g*x)*A,e[15]=(f*_-h*y+l*x)*A,e):null}function I(e,t){var r=t[0],n=t[1],a=t[2],i=t[3],o=t[4],s=t[5],u=t[6],c=t[7],f=t[8],h=t[9],l=t[10],d=t[11],p=t[12],m=t[13],g=t[14],b=t[15];return e[0]=s*(l*b-d*g)-h*(u*b-c*g)+m*(u*d-c*l),e[1]=-(n*(l*b-d*g)-h*(a*b-i*g)+m*(a*d-i*l)),e[2]=n*(u*b-c*g)-s*(a*b-i*g)+m*(a*c-i*u),e[3]=-(n*(u*d-c*l)-s*(a*d-i*l)+h*(a*c-i*u)),e[4]=-(o*(l*b-d*g)-f*(u*b-c*g)+p*(u*d-c*l)),e[5]=r*(l*b-d*g)-f*(a*b-i*g)+p*(a*d-i*l),e[6]=-(r*(u*b-c*g)-o*(a*b-i*g)+p*(a*c-i*u)),e[7]=r*(u*d-c*l)-o*(a*d-i*l)+f*(a*c-i*u),e[8]=o*(h*b-d*m)-f*(s*b-c*m)+p*(s*d-c*h),e[9]=-(r*(h*b-d*m)-f*(n*b-i*m)+p*(n*d-i*h)),e[10]=r*(s*b-c*m)-o*(n*b-i*m)+p*(n*c-i*s),e[11]=-(r*(s*d-c*h)-o*(n*d-i*h)+f*(n*c-i*s)),e[12]=-(o*(h*g-l*m)-f*(s*g-u*m)+p*(s*l-u*h)),e[13]=r*(h*g-l*m)-f*(n*g-a*m)+p*(n*l-a*h),e[14]=-(r*(s*g-u*m)-o*(n*g-a*m)+p*(n*u-a*s)),e[15]=r*(s*l-u*h)-o*(n*l-a*h)+f*(n*u-a*s),e}function C(e){var t=e[0],r=e[1],n=e[2],a=e[3],i=e[4],o=e[5],s=e[6],u=e[7],c=e[8],f=e[9],h=e[10],l=e[11],d=e[12],p=e[13],m=e[14],g=e[15];return(t*o-r*i)*(h*g-l*m)-(t*s-n*i)*(f*g-l*p)+(t*u-a*i)*(f*m-h*p)+(r*s-n*o)*(c*g-l*d)-(r*u-a*o)*(c*m-h*d)+(n*u-a*s)*(c*p-f*d)}function O(e,t,r){var n=t[0],a=t[1],i=t[2],o=t[3],s=t[4],u=t[5],c=t[6],f=t[7],h=t[8],l=t[9],d=t[10],p=t[11],m=t[12],g=t[13],b=t[14],x=t[15],y=r[0],v=r[1],_=r[2],M=r[3];return e[0]=y*n+v*s+_*h+M*m,e[1]=y*a+v*u+_*l+M*g,e[2]=y*i+v*c+_*d+M*b,e[3]=y*o+v*f+_*p+M*x,y=r[4],v=r[5],_=r[6],M=r[7],e[4]=y*n+v*s+_*h+M*m,e[5]=y*a+v*u+_*l+M*g,e[6]=y*i+v*c+_*d+M*b,e[7]=y*o+v*f+_*p+M*x,y=r[8],v=r[9],_=r[10],M=r[11],e[8]=y*n+v*s+_*h+M*m,e[9]=y*a+v*u+_*l+M*g,e[10]=y*i+v*c+_*d+M*b,e[11]=y*o+v*f+_*p+M*x,y=r[12],v=r[13],_=r[14],M=r[15],e[12]=y*n+v*s+_*h+M*m,e[13]=y*a+v*u+_*l+M*g,e[14]=y*i+v*c+_*d+M*b,e[15]=y*o+v*f+_*p+M*x,e}function B(e,t,r){var n,a,i,o,s,u,c,f,h,l,d,p,m=r[0],g=r[1],b=r[2];return t===e?(e[12]=t[0]*m+t[4]*g+t[8]*b+t[12],e[13]=t[1]*m+t[5]*g+t[9]*b+t[13],e[14]=t[2]*m+t[6]*g+t[10]*b+t[14],e[15]=t[3]*m+t[7]*g+t[11]*b+t[15]):(n=t[0],a=t[1],i=t[2],o=t[3],s=t[4],u=t[5],c=t[6],f=t[7],h=t[8],l=t[9],d=t[10],p=t[11],e[0]=n,e[1]=a,e[2]=i,e[3]=o,e[4]=s,e[5]=u,e[6]=c,e[7]=f,e[8]=h,e[9]=l,e[10]=d,e[11]=p,e[12]=n*m+s*g+h*b+t[12],e[13]=a*m+u*g+l*b+t[13],e[14]=i*m+c*g+d*b+t[14],e[15]=o*m+f*g+p*b+t[15]),e}function D(e,t,r){var n=r[0],a=r[1],i=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function G(e,t,r,n){var a,i,o,s,u,c,f,h,l,d,p,m,g,b,x,y,v,_,M,F,T,U,E,S,R=n[0],A=n[1],N=n[2],L=Math.hypot(R,A,N);return L<w?null:(R*=L=1/L,A*=L,N*=L,a=Math.sin(r),o=1-(i=Math.cos(r)),s=t[0],u=t[1],c=t[2],f=t[3],h=t[4],l=t[5],d=t[6],p=t[7],m=t[8],g=t[9],b=t[10],x=t[11],y=R*R*o+i,v=A*R*o+N*a,_=N*R*o-A*a,M=R*A*o-N*a,F=A*A*o+i,T=N*A*o+R*a,U=R*N*o+A*a,E=A*N*o-R*a,S=N*N*o+i,e[0]=s*y+h*v+m*_,e[1]=u*y+l*v+g*_,e[2]=c*y+d*v+b*_,e[3]=f*y+p*v+x*_,e[4]=s*M+h*F+m*T,e[5]=u*M+l*F+g*T,e[6]=c*M+d*F+b*T,e[7]=f*M+p*F+x*T,e[8]=s*U+h*E+m*S,e[9]=u*U+l*E+g*S,e[10]=c*U+d*E+b*S,e[11]=f*U+p*E+x*S,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function j(e,t,r){var n=Math.sin(r),a=Math.cos(r),i=t[4],o=t[5],s=t[6],u=t[7],c=t[8],f=t[9],h=t[10],l=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=i*a+c*n,e[5]=o*a+f*n,e[6]=s*a+h*n,e[7]=u*a+l*n,e[8]=c*a-i*n,e[9]=f*a-o*n,e[10]=h*a-s*n,e[11]=l*a-u*n,e}function V(e,t,r){var n=Math.sin(r),a=Math.cos(r),i=t[0],o=t[1],s=t[2],u=t[3],c=t[8],f=t[9],h=t[10],l=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*a-c*n,e[1]=o*a-f*n,e[2]=s*a-h*n,e[3]=u*a-l*n,e[8]=i*n+c*a,e[9]=o*n+f*a,e[10]=s*n+h*a,e[11]=u*n+l*a,e}function H(e,t,r){var n=Math.sin(r),a=Math.cos(r),i=t[0],o=t[1],s=t[2],u=t[3],c=t[4],f=t[5],h=t[6],l=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*a+c*n,e[1]=o*a+f*n,e[2]=s*a+h*n,e[3]=u*a+l*n,e[4]=c*a-i*n,e[5]=f*a-o*n,e[6]=h*a-s*n,e[7]=l*a-u*n,e}function z(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function k(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function q(e,t,r){var n,a,i,o=r[0],s=r[1],u=r[2],c=Math.hypot(o,s,u);return c<w?null:(o*=c=1/c,s*=c,u*=c,n=Math.sin(t),i=1-(a=Math.cos(t)),e[0]=o*o*i+a,e[1]=s*o*i+u*n,e[2]=u*o*i-s*n,e[3]=0,e[4]=o*s*i-u*n,e[5]=s*s*i+a,e[6]=u*s*i+o*n,e[7]=0,e[8]=o*u*i+s*n,e[9]=s*u*i-o*n,e[10]=u*u*i+a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function X(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function W(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function $(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Y(e,t,r){var n=t[0],a=t[1],i=t[2],o=t[3],s=n+n,u=a+a,c=i+i,f=n*s,h=n*u,l=n*c,d=a*u,p=a*c,m=i*c,g=o*s,b=o*u,x=o*c;return e[0]=1-(d+m),e[1]=h+x,e[2]=l-b,e[3]=0,e[4]=h-x,e[5]=1-(f+m),e[6]=p+g,e[7]=0,e[8]=l+b,e[9]=p-g,e[10]=1-(f+d),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function Q(e,t){var r=new F(3),n=-t[0],a=-t[1],i=-t[2],o=t[3],s=t[4],u=t[5],c=t[6],f=t[7],h=n*n+a*a+i*i+o*o;return h>0?(r[0]=2*(s*o+f*n+u*i-c*a)/h,r[1]=2*(u*o+f*a+c*n-s*i)/h,r[2]=2*(c*o+f*i+s*a-u*n)/h):(r[0]=2*(s*o+f*n+u*i-c*a),r[1]=2*(u*o+f*a+c*n-s*i),r[2]=2*(c*o+f*i+s*a-u*n)),Y(e,t,r),e}function Z(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function J(e,t){var r=t[0],n=t[1],a=t[2],i=t[4],o=t[5],s=t[6],u=t[8],c=t[9],f=t[10];return e[0]=Math.hypot(r,n,a),e[1]=Math.hypot(i,o,s),e[2]=Math.hypot(u,c,f),e}function K(e,t){var r=new F(3);J(r,t);var n=1/r[0],a=1/r[1],i=1/r[2],o=t[0]*n,s=t[1]*a,u=t[2]*i,c=t[4]*n,f=t[5]*a,h=t[6]*i,l=t[8]*n,d=t[9]*a,p=t[10]*i,m=o+f+p,g=0;return m>0?(g=2*Math.sqrt(m+1),e[3]=.25*g,e[0]=(h-d)/g,e[1]=(l-u)/g,e[2]=(s-c)/g):o>f&&o>p?(g=2*Math.sqrt(1+o-f-p),e[3]=(h-d)/g,e[0]=.25*g,e[1]=(s+c)/g,e[2]=(l+u)/g):f>p?(g=2*Math.sqrt(1+f-o-p),e[3]=(l-u)/g,e[0]=(s+c)/g,e[1]=.25*g,e[2]=(h+d)/g):(g=2*Math.sqrt(1+p-o-f),e[3]=(s-c)/g,e[0]=(l+u)/g,e[1]=(h+d)/g,e[2]=.25*g),e}function ee(e,t,r,n){var a=t[0],i=t[1],o=t[2],s=t[3],u=a+a,c=i+i,f=o+o,h=a*u,l=a*c,d=a*f,p=i*c,m=i*f,g=o*f,b=s*u,x=s*c,y=s*f,v=n[0],_=n[1],M=n[2];return e[0]=(1-(p+g))*v,e[1]=(l+y)*v,e[2]=(d-x)*v,e[3]=0,e[4]=(l-y)*_,e[5]=(1-(h+g))*_,e[6]=(m+b)*_,e[7]=0,e[8]=(d+x)*M,e[9]=(m-b)*M,e[10]=(1-(h+p))*M,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function te(e,t,r,n,a){var i=t[0],o=t[1],s=t[2],u=t[3],c=i+i,f=o+o,h=s+s,l=i*c,d=i*f,p=i*h,m=o*f,g=o*h,b=s*h,x=u*c,y=u*f,v=u*h,_=n[0],M=n[1],w=n[2],F=a[0],T=a[1],U=a[2],E=(1-(m+b))*_,S=(d+v)*_,R=(p-y)*_,A=(d-v)*M,N=(1-(l+b))*M,L=(g+x)*M,P=(p+y)*w,I=(g-x)*w,C=(1-(l+m))*w;return e[0]=E,e[1]=S,e[2]=R,e[3]=0,e[4]=A,e[5]=N,e[6]=L,e[7]=0,e[8]=P,e[9]=I,e[10]=C,e[11]=0,e[12]=r[0]+F-(E*F+A*T+P*U),e[13]=r[1]+T-(S*F+N*T+I*U),e[14]=r[2]+U-(R*F+L*T+C*U),e[15]=1,e}function re(e,t){var r=t[0],n=t[1],a=t[2],i=t[3],o=r+r,s=n+n,u=a+a,c=r*o,f=n*o,h=n*s,l=a*o,d=a*s,p=a*u,m=i*o,g=i*s,b=i*u;return e[0]=1-h-p,e[1]=f+b,e[2]=l-g,e[3]=0,e[4]=f-b,e[5]=1-c-p,e[6]=d+m,e[7]=0,e[8]=l+g,e[9]=d-m,e[10]=1-c-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ne(e,t,r,n,a,i,o){var s=1/(r-t),u=1/(a-n),c=1/(i-o);return e[0]=2*i*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*i*u,e[6]=0,e[7]=0,e[8]=(r+t)*s,e[9]=(a+n)*u,e[10]=(o+i)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*i*2*c,e[15]=0,e}function ae(e,t,r,n,a){var i,o=1/Math.tan(t/2);return e[0]=o/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=a&&a!==1/0?(i=1/(n-a),e[10]=(a+n)*i,e[14]=2*a*n*i):(e[10]=-1,e[14]=-2*n),e}function ie(e,t,r,n){var a=Math.tan(t.upDegrees*Math.PI/180),i=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),u=2/(o+s),c=2/(a+i);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-(o-s)*u*.5,e[9]=(a-i)*c*.5,e[10]=n/(r-n),e[11]=-1,e[12]=0,e[13]=0,e[14]=n*r/(r-n),e[15]=0,e}function oe(e,t,r,n,a,i,o){var s=1/(t-r),u=1/(n-a),c=1/(i-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+r)*s,e[13]=(a+n)*u,e[14]=(o+i)*c,e[15]=1,e}function se(e,t,r,n){var a,i,o,s,u,c,f,h,l,d,p=t[0],m=t[1],g=t[2],b=n[0],x=n[1],y=n[2],v=r[0],_=r[1],M=r[2];return Math.abs(p-v)<w&&Math.abs(m-_)<w&&Math.abs(g-M)<w?N(e):(f=p-v,h=m-_,l=g-M,a=x*(l*=d=1/Math.hypot(f,h,l))-y*(h*=d),i=y*(f*=d)-b*l,o=b*h-x*f,(d=Math.hypot(a,i,o))?(a*=d=1/d,i*=d,o*=d):(a=0,i=0,o=0),s=h*o-l*i,u=l*a-f*o,c=f*i-h*a,(d=Math.hypot(s,u,c))?(s*=d=1/d,u*=d,c*=d):(s=0,u=0,c=0),e[0]=a,e[1]=s,e[2]=f,e[3]=0,e[4]=i,e[5]=u,e[6]=h,e[7]=0,e[8]=o,e[9]=c,e[10]=l,e[11]=0,e[12]=-(a*p+i*m+o*g),e[13]=-(s*p+u*m+c*g),e[14]=-(f*p+h*m+l*g),e[15]=1,e)}function ue(e,t,r,n){var a=t[0],i=t[1],o=t[2],s=n[0],u=n[1],c=n[2],f=a-r[0],h=i-r[1],l=o-r[2],d=f*f+h*h+l*l;d>0&&(f*=d=1/Math.sqrt(d),h*=d,l*=d);var p=u*l-c*h,m=c*f-s*l,g=s*h-u*f;return(d=p*p+m*m+g*g)>0&&(p*=d=1/Math.sqrt(d),m*=d,g*=d),e[0]=p,e[1]=m,e[2]=g,e[3]=0,e[4]=h*g-l*m,e[5]=l*p-f*g,e[6]=f*m-h*p,e[7]=0,e[8]=f,e[9]=h,e[10]=l,e[11]=0,e[12]=a,e[13]=i,e[14]=o,e[15]=1,e}function ce(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function fe(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function he(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e}function le(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}function de(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e}function pe(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e[6]=t[6]+r[6]*n,e[7]=t[7]+r[7]*n,e[8]=t[8]+r[8]*n,e[9]=t[9]+r[9]*n,e[10]=t[10]+r[10]*n,e[11]=t[11]+r[11]*n,e[12]=t[12]+r[12]*n,e[13]=t[13]+r[13]*n,e[14]=t[14]+r[14]*n,e[15]=t[15]+r[15]*n,e}function me(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function ge(e,t){var r=e[0],n=e[1],a=e[2],i=e[3],o=e[4],s=e[5],u=e[6],c=e[7],f=e[8],h=e[9],l=e[10],d=e[11],p=e[12],m=e[13],g=e[14],b=e[15],x=t[0],y=t[1],v=t[2],_=t[3],M=t[4],F=t[5],T=t[6],U=t[7],E=t[8],S=t[9],R=t[10],A=t[11],N=t[12],L=t[13],P=t[14],I=t[15];return Math.abs(r-x)<=w*Math.max(1,Math.abs(r),Math.abs(x))&&Math.abs(n-y)<=w*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(a-v)<=w*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(i-_)<=w*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(o-M)<=w*Math.max(1,Math.abs(o),Math.abs(M))&&Math.abs(s-F)<=w*Math.max(1,Math.abs(s),Math.abs(F))&&Math.abs(u-T)<=w*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(c-U)<=w*Math.max(1,Math.abs(c),Math.abs(U))&&Math.abs(f-E)<=w*Math.max(1,Math.abs(f),Math.abs(E))&&Math.abs(h-S)<=w*Math.max(1,Math.abs(h),Math.abs(S))&&Math.abs(l-R)<=w*Math.max(1,Math.abs(l),Math.abs(R))&&Math.abs(d-A)<=w*Math.max(1,Math.abs(d),Math.abs(A))&&Math.abs(p-N)<=w*Math.max(1,Math.abs(p),Math.abs(N))&&Math.abs(m-L)<=w*Math.max(1,Math.abs(m),Math.abs(L))&&Math.abs(g-P)<=w*Math.max(1,Math.abs(g),Math.abs(P))&&Math.abs(b-I)<=w*Math.max(1,Math.abs(b),Math.abs(I))}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var be=O,xe=le;function ye(){var e=new F(3);return F!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function ve(e){var t=new F(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function _e(e){var t=e[0],r=e[1],n=e[2];return Math.hypot(t,r,n)}function Me(e,t,r){var n=new F(3);return n[0]=e,n[1]=t,n[2]=r,n}function we(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Fe(e,t,r,n){return e[0]=t,e[1]=r,e[2]=n,e}function Te(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function Ue(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function Ee(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function Se(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e}function Re(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function Ae(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function Ne(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e}function Le(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e}function Pe(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function Ie(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function Ce(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e}function Oe(e,t){var r=t[0]-e[0],n=t[1]-e[1],a=t[2]-e[2];return Math.hypot(r,n,a)}function Be(e,t){var r=t[0]-e[0],n=t[1]-e[1],a=t[2]-e[2];return r*r+n*n+a*a}function De(e){var t=e[0],r=e[1],n=e[2];return t*t+r*r+n*n}function Ge(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function je(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function Ve(e,t){var r=t[0],n=t[1],a=t[2],i=r*r+n*n+a*a;return i>0&&(i=1/Math.sqrt(i)),e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function He(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function ze(e,t,r){var n=t[0],a=t[1],i=t[2],o=r[0],s=r[1],u=r[2];return e[0]=a*u-i*s,e[1]=i*o-n*u,e[2]=n*s-a*o,e}function ke(e,t,r,n){var a=t[0],i=t[1],o=t[2];return e[0]=a+n*(r[0]-a),e[1]=i+n*(r[1]-i),e[2]=o+n*(r[2]-o),e}function qe(e,t,r,n,a,i){var o=i*i,s=o*(2*i-3)+1,u=o*(i-2)+i,c=o*(i-1),f=o*(3-2*i);return e[0]=t[0]*s+r[0]*u+n[0]*c+a[0]*f,e[1]=t[1]*s+r[1]*u+n[1]*c+a[1]*f,e[2]=t[2]*s+r[2]*u+n[2]*c+a[2]*f,e}function Xe(e,t,r,n,a,i){var o=1-i,s=o*o,u=i*i,c=s*o,f=3*i*s,h=3*u*o,l=u*i;return e[0]=t[0]*c+r[0]*f+n[0]*h+a[0]*l,e[1]=t[1]*c+r[1]*f+n[1]*h+a[1]*l,e[2]=t[2]*c+r[2]*f+n[2]*h+a[2]*l,e}function We(e,t){t=t||1;var r=2*T()*Math.PI,n=2*T()-1,a=Math.sqrt(1-n*n)*t;return e[0]=Math.cos(r)*a,e[1]=Math.sin(r)*a,e[2]=n*t,e}function $e(e,t,r){var n=t[0],a=t[1],i=t[2],o=r[3]*n+r[7]*a+r[11]*i+r[15];return o=o||1,e[0]=(r[0]*n+r[4]*a+r[8]*i+r[12])/o,e[1]=(r[1]*n+r[5]*a+r[9]*i+r[13])/o,e[2]=(r[2]*n+r[6]*a+r[10]*i+r[14])/o,e}function Ye(e,t,r){var n=t[0],a=t[1],i=t[2];return e[0]=n*r[0]+a*r[3]+i*r[6],e[1]=n*r[1]+a*r[4]+i*r[7],e[2]=n*r[2]+a*r[5]+i*r[8],e}function Qe(e,t,r){var n=r[0],a=r[1],i=r[2],o=r[3],s=t[0],u=t[1],c=t[2],f=a*c-i*u,h=i*s-n*c,l=n*u-a*s,d=a*l-i*h,p=i*f-n*l,m=n*h-a*f,g=2*o;return f*=g,h*=g,l*=g,d*=2,p*=2,m*=2,e[0]=s+f+d,e[1]=u+h+p,e[2]=c+l+m,e}function Ze(e,t,r,n){var a=[],i=[];return a[0]=t[0]-r[0],a[1]=t[1]-r[1],a[2]=t[2]-r[2],i[0]=a[0],i[1]=a[1]*Math.cos(n)-a[2]*Math.sin(n),i[2]=a[1]*Math.sin(n)+a[2]*Math.cos(n),e[0]=i[0]+r[0],e[1]=i[1]+r[1],e[2]=i[2]+r[2],e}function Je(e,t,r,n){var a=[],i=[];return a[0]=t[0]-r[0],a[1]=t[1]-r[1],a[2]=t[2]-r[2],i[0]=a[2]*Math.sin(n)+a[0]*Math.cos(n),i[1]=a[1],i[2]=a[2]*Math.cos(n)-a[0]*Math.sin(n),e[0]=i[0]+r[0],e[1]=i[1]+r[1],e[2]=i[2]+r[2],e}function Ke(e,t,r,n){var a=[],i=[];return a[0]=t[0]-r[0],a[1]=t[1]-r[1],a[2]=t[2]-r[2],i[0]=a[0]*Math.cos(n)-a[1]*Math.sin(n),i[1]=a[0]*Math.sin(n)+a[1]*Math.cos(n),i[2]=a[2],e[0]=i[0]+r[0],e[1]=i[1]+r[1],e[2]=i[2]+r[2],e}function et(e,t){var r=e[0],n=e[1],a=e[2],i=t[0],o=t[1],s=t[2],u=Math.sqrt(r*r+n*n+a*a)*Math.sqrt(i*i+o*o+s*s),c=u&&He(e,t)/u;return Math.acos(Math.min(Math.max(c,-1),1))}function tt(e){return e[0]=0,e[1]=0,e[2]=0,e}function rt(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function nt(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function at(e,t){var r=e[0],n=e[1],a=e[2],i=t[0],o=t[1],s=t[2];return Math.abs(r-i)<=w*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-o)<=w*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(a-s)<=w*Math.max(1,Math.abs(a),Math.abs(s))}var it,ot=Ue,st=Ee,ut=Se,ct=Oe,ft=Be,ht=_e,lt=De,dt=(it=ye(),function(e,t,r,n,a,i){var o,s;for(t||(t=3),r||(r=0),s=n?Math.min(n*t+r,e.length):e.length,o=r;o<s;o+=t)it[0]=e[o],it[1]=e[o+1],it[2]=e[o+2],a(it,it,i),e[o]=it[0],e[o+1]=it[1],e[o+2]=it[2];return e});function pt(){var e=new F(4);return F!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function mt(e){var t=new F(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function gt(e,t,r,n){var a=new F(4);return a[0]=e,a[1]=t,a[2]=r,a[3]=n,a}function bt(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function xt(e,t,r,n,a){return e[0]=t,e[1]=r,e[2]=n,e[3]=a,e}function yt(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function vt(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}function _t(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e}function Mt(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e}function wt(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function Ft(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function Tt(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e}function Ut(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e}function Et(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function St(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function Rt(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e}function At(e,t){var r=t[0]-e[0],n=t[1]-e[1],a=t[2]-e[2],i=t[3]-e[3];return Math.hypot(r,n,a,i)}function Nt(e,t){var r=t[0]-e[0],n=t[1]-e[1],a=t[2]-e[2],i=t[3]-e[3];return r*r+n*n+a*a+i*i}function Lt(e){var t=e[0],r=e[1],n=e[2],a=e[3];return Math.hypot(t,r,n,a)}function Pt(e){var t=e[0],r=e[1],n=e[2],a=e[3];return t*t+r*r+n*n+a*a}function It(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function Ct(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function Ot(e,t){var r=t[0],n=t[1],a=t[2],i=t[3],o=r*r+n*n+a*a+i*i;return o>0&&(o=1/Math.sqrt(o)),e[0]=r*o,e[1]=n*o,e[2]=a*o,e[3]=i*o,e}function Bt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function Dt(e,t,r,n){var a=r[0]*n[1]-r[1]*n[0],i=r[0]*n[2]-r[2]*n[0],o=r[0]*n[3]-r[3]*n[0],s=r[1]*n[2]-r[2]*n[1],u=r[1]*n[3]-r[3]*n[1],c=r[2]*n[3]-r[3]*n[2],f=t[0],h=t[1],l=t[2],d=t[3];return e[0]=h*c-l*u+d*s,e[1]=-f*c+l*o-d*i,e[2]=f*u-h*o+d*a,e[3]=-f*s+h*i-l*a,e}function Gt(e,t,r,n){var a=t[0],i=t[1],o=t[2],s=t[3];return e[0]=a+n*(r[0]-a),e[1]=i+n*(r[1]-i),e[2]=o+n*(r[2]-o),e[3]=s+n*(r[3]-s),e}function jt(e,t){var r,n,a,i,o,s;t=t||1;do{o=(r=2*T()-1)*r+(n=2*T()-1)*n}while(o>=1);do{s=(a=2*T()-1)*a+(i=2*T()-1)*i}while(s>=1);var u=Math.sqrt((1-o)/s);return e[0]=t*r,e[1]=t*n,e[2]=t*a*u,e[3]=t*i*u,e}function Vt(e,t,r){var n=t[0],a=t[1],i=t[2],o=t[3];return e[0]=r[0]*n+r[4]*a+r[8]*i+r[12]*o,e[1]=r[1]*n+r[5]*a+r[9]*i+r[13]*o,e[2]=r[2]*n+r[6]*a+r[10]*i+r[14]*o,e[3]=r[3]*n+r[7]*a+r[11]*i+r[15]*o,e}function Ht(e,t,r){var n=t[0],a=t[1],i=t[2],o=r[0],s=r[1],u=r[2],c=r[3],f=c*n+s*i-u*a,h=c*a+u*n-o*i,l=c*i+o*a-s*n,d=-o*n-s*a-u*i;return e[0]=f*c+d*-o+h*-u-l*-s,e[1]=h*c+d*-s+l*-o-f*-u,e[2]=l*c+d*-u+f*-s-h*-o,e[3]=t[3],e}function zt(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}function kt(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function qt(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function Xt(e,t){var r=e[0],n=e[1],a=e[2],i=e[3],o=t[0],s=t[1],u=t[2],c=t[3];return Math.abs(r-o)<=w*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-s)<=w*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(a-u)<=w*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(i-c)<=w*Math.max(1,Math.abs(i),Math.abs(c))}var Wt=vt,$t=_t,Yt=Mt,Qt=At,Zt=Nt,Jt=Lt,Kt=Pt,er=function(){var e=pt();return function(t,r,n,a,i,o){var s,u;for(r||(r=4),n||(n=0),u=a?Math.min(a*r+n,t.length):t.length,s=n;s<u;s+=r)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],i(e,e,o),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2],t[s+3]=e[3];return t}}();n.create(),a.create();function tr(e,t,r){return(1-r)*e+r*t}var rr=function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o};function nr(e){return"#"+((4294967040&function(e){let t=0;for(let r=0;r<e.length;r++)t=Math.imul(31,t)+e.charCodeAt(r)|0;return t}(e)|255)>>>0).toString(16)}class ar{static begin(e){performance.mark(e)}static end(e){performance.measure(e,e)}}let ir=class{constructor(){this.profiles=new Map,this.enabled=!1,this.targetFrameTimeMs=2}initialize(e,t){this.parent=e,this.dom=document.createElement("div"),this.dom.style.cssText="opacity:0.75;position:absolute;z-index:10000;pointer-events:none;margin:8px";const r=document.createElement("canvas");this.ctx=p(r.getContext("2d")),this.dom.appendChild(r);t.addFolder("Profiler").add(this,"enabled").onChange(()=>this.setEnabled(this.enabled))}setEnabled(e){this.enabled=e,this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),e&&this.parent.appendChild(this.dom),this.profiles.clear()}update(){const e=performance.getEntriesByType("measure"),t=performance.getEntriesByName("FrameStart","mark");performance.clearMeasures(),performance.clearMarks(),e.sort((e,t)=>e.startTime==t.startTime?t.duration-e.duration:e.startTime-t.startTime);const r=t[0].startTime,n=this.targetFrameTimeMs;for(let t=0;t<e.length;t++){const n=e[t],a=this.profiles.get(n.name),i=n.startTime-r,o=n.startTime+n.duration-r;if(a){const e=.03;a.aveBegin=tr(a.aveBegin,i,e),a.aveEnd=tr(a.aveEnd,o,e)}else this.profiles.set(n.name,{aveBegin:i,aveEnd:o})}const a=4+20*e.length,i=a+20;i!=this.ctx.canvas.clientHeight&&(this.ctx.canvas.width=300*devicePixelRatio,this.ctx.canvas.height=i*devicePixelRatio,this.ctx.font="9px Helvetica,Arial,sans-serif",this.ctx.textBaseline="middle",this.ctx.scale(devicePixelRatio,devicePixelRatio),this.ctx.canvas.style.width="300px",this.ctx.canvas.style.height=i+"px"),this.ctx.fillStyle="#222",this.ctx.fillRect(0,0,this.ctx.canvas.width,a);for(let t=0;t<e.length;t++){const r=e[t].name,a=p(this.profiles.get(r)),i=4+a.aveBegin/n*300,o=4+20*t,s=(a.aveEnd-a.aveBegin)/n*300;this.ctx.fillStyle=nr(r),this.ctx.fillRect(i,o,s,16)}this.ctx.fillStyle="white";for(let t=0;t<e.length;t++){const r=e[t].name,n=p(this.profiles.get(r)),a=4+20*t,i=r+": "+(n.aveEnd-n.aveBegin).toFixed(2)+" ms";this.ctx.fillText(i,4,a+8)}const o=a;this.ctx.fillStyle="#222",this.ctx.fillRect(0,o+4,this.ctx.canvas.width,20),this.ctx.fillStyle="white";const s=(performance.memory.usedJSHeapSize/1048576).toFixed(3),u=(performance.memory.jsHeapSizeLimit/1048576).toFixed(3);this.ctx.fillText("Memory: "+s+" MB / "+u+" MB",4,o+4+8)}};ir=rr([v],ir);var or;!function(e){e[e.Forward=0]="Forward",e[e.Reverse=1]="Reverse"}(or||(or={}));const sr=(e,t)=>{_(e,t);const r=m(t);!function(e,t,r,n){const a=p(y[e]);p(a.vars[t]).metadata[r]=n}(e.constructor.name,r,"ModuleGroup","All")};function ur(e,t,r,n){const a=y[e.constructor.name].vars,i=Object.keys(a),o=i.map(e=>a[e].type);return t.map(t=>{const a=o.indexOf(t);return d(-1!=a,"Game object does not contain a meta-registered variable of type "+t+". Required by the "+r+" function of "+n),e[i[a]]})}class cr{constructor(){this.modules=[]}initialize(e,t){this.functions=t;const r=y[e.constructor.name].vars;for(const t of Object.keys(r)){const n=r[t].metadata.ModuleGroup;n&&this.modules.push({type:r[t].type,group:n,object:e[t],funcArgs:{}})}for(const t of this.modules){const r=y[t.type];for(const n of this.functions){const a=r.funcs[n];a&&(t.funcArgs[n]=ur(e,a.paramTypes,n,t.type))}}}callFunction(e,t=or.Forward){d(this.functions.includes(e));const r=t==or.Reverse,n=this.modules.length;for(let t=0;t<n;t++){const a=this.modules[r?n-1-t:t],i=a.funcArgs[e];i&&(ar.begin(a.type+"."+e),a.object[e](...i),ar.end(a.type+"."+e))}}}class fr{constructor(){this._add=[],this._addColor=[],this._folders={}}add(){const e={args:arguments};return this._add.push(e),{onChange:t=>{e.onChange=t}}}addColor(){const e={args:arguments};return this._addColor.push(e),{onChange:t=>{e.onChange=t}}}addFolder(e){return this._folders[e]=new fr,this._folders[e]}async show(){var e;if(!g(this._guiPromise)){if(void 0===this._gui){this._guiPromise=r.e(1).then(r.bind(null,9));const e=await this._guiPromise;this._gui=new e.GUI({load:this._saveObject})}(null===(e=this._saveObject)||void 0===e?void 0:e.closed)&&this._gui.close();for(const e of this._add){this._gui.getRoot().remember(e.args[0]);const t=this._gui.add.apply(this._gui,e.args);e.onChange&&(t.onChange(e.onChange),e.onChange(t.object[t.property]))}for(const e of this._addColor){this._gui.getRoot().remember(e.args[0]);const t=this._gui.addColor.apply(this._gui,e.args);e.onChange&&(t.onChange(e.onChange),e.onChange(t.object[t.property]))}for(const e in this._folders)this._folders[e]._gui=this._gui.addFolder(e),this._folders[e].show();this.add=this._gui.add.bind(this._gui),this.addFolder=this._gui.addFolder.bind(this._gui),this.show=this._gui.show.bind(this._gui),this.hide=this._gui.hide.bind(this._gui)}}hide(){}update(){if(this._gui&&!this._gui.closed){for(const e in this._gui.__controllers)this._gui.__controllers[e].updateDisplay();for(const e in this._gui.__folders){const t=this._gui.__folders[e];for(const e of t.__controllers)e.updateDisplay()}}}toJSON(){return this._gui?this._gui.getSaveObject():void 0}fromJSON(e){d(!g(this._gui),"State must be loaded before the DebugMenu is shown"),this._saveObject=e}}class hr{constructor(e,t,r=1,i=2e4){this.cameraMatrix=n.create(),this.viewMatrix=n.create(),this.projectionMatrix=n.create(),this.projectionMatrixInverse=n.create(),this.viewProjMatrix=n.create(),this.viewProjMatrixInverse=n.create(),this.forward=a.create(),this.up=a.create(),this.right=a.create(),e=b(e,60/180*Math.PI),r=b(r,1),i=b(i,2e3),t=b(t,1),this.setPerspective(e,t,r,i)}getFovX(){return 2*Math.atan(Math.tan(.5*this.fov)*this.aspect)}copy(e){this.fov=e.fov,this.near=e.near,this.far=e.far,this.aspect=e.aspect,n.copy(this.cameraMatrix,e.cameraMatrix),n.copy(this.viewMatrix,e.viewMatrix),n.copy(this.projectionMatrix,e.projectionMatrix),n.copy(this.projectionMatrixInverse,e.projectionMatrixInverse),n.copy(this.viewProjMatrix,e.viewProjMatrix),n.copy(this.viewProjMatrixInverse,e.viewProjMatrixInverse),a.copy(this.forward,e.forward),a.copy(this.up,e.up),a.copy(this.right,e.right)}getPos(e){return n.getTranslation(e,this.cameraMatrix)}viewMatrixUpdated(){n.invert(this.cameraMatrix,this.viewMatrix),a.set(this.right,this.cameraMatrix[0],this.cameraMatrix[1],this.cameraMatrix[2]),a.set(this.up,this.cameraMatrix[4],this.cameraMatrix[5],this.cameraMatrix[6]),a.set(this.forward,-this.cameraMatrix[8],-this.cameraMatrix[9],-this.cameraMatrix[10]),n.multiply(this.viewProjMatrix,this.projectionMatrix,this.viewMatrix),n.multiply(this.viewProjMatrixInverse,this.cameraMatrix,this.projectionMatrixInverse)}setPerspective(e,t,r,a){this.fov=e,this.aspect=t,this.near=r,this.far=a,n.perspective(this.projectionMatrix,e,t,r,a),n.invert(this.projectionMatrixInverse,this.projectionMatrix),n.multiply(this.viewProjMatrix,this.projectionMatrix,this.viewMatrix),n.multiply(this.viewProjMatrixInverse,this.cameraMatrix,this.projectionMatrixInverse)}}var lr,dr,pr,mr,gr,br,xr,yr,vr,_r,Mr,wr,Fr,Tr;function Ur(e){switch(e){case dr.Float:return 4;case dr.Float2:return 8;case dr.Float3:return 12;case dr.Float4:return 16;case dr.Int:return 4;case dr.Int2:return 8;case dr.Int3:return 12;case dr.Int4:return 16;case dr.Uint:return 4;case dr.Uint2:return 8;case dr.Uint3:return 12;case dr.Uint4:return 16;case dr.Short:return 2;case dr.Short2:return 4;case dr.Short3:return 6;case dr.Short4:return 8;case dr.Ushort:return 2;case dr.Ushort2:return 4;case dr.Ushort3:return 6;case dr.Ushort4:return 8;case dr.Char:return 1;case dr.Char2:return 2;case dr.Char3:return 3;case dr.Char4:return 4;case dr.Uchar:return 1;case dr.Uchar2:return 2;case dr.Uchar3:return 3;case dr.Uchar4:return 4;case dr.Half:return 2;case dr.Half2:return 4;case dr.Half3:return 6;case dr.Half4:return 8;case dr.Float3x3:return 36;case dr.Float4x4:return 64;default:throw new Error("Unsupported type: "+e)}}!function(e){e[e.VertexArrayObject=1]="VertexArrayObject",e[e.TextureFloat=2]="TextureFloat",e[e.TextureHalf=4]="TextureHalf",e[e.TextureFloatLinearFiltering=8]="TextureFloatLinearFiltering",e[e.TextureHalfLinearFiltering=16]="TextureHalfLinearFiltering",e[e.TextureWrite=32]="TextureWrite",e[e.ShaderDerivatives=64]="ShaderDerivatives",e[e.Instancing=128]="Instancing",e[e.AnistropicFiltering=256]="AnistropicFiltering",e[e.ShaderGlsl100=512]="ShaderGlsl100",e[e.ShaderGlsl300=1024]="ShaderGlsl300"}(lr||(lr={})),function(e){e[e.Undefined=0]="Undefined",e[e.Float=1]="Float",e[e.Float2=2]="Float2",e[e.Float3=3]="Float3",e[e.Float4=4]="Float4",e[e.Int=5]="Int",e[e.Int2=6]="Int2",e[e.Int3=7]="Int3",e[e.Int4=8]="Int4",e[e.Uint=9]="Uint",e[e.Uint2=10]="Uint2",e[e.Uint3=11]="Uint3",e[e.Uint4=12]="Uint4",e[e.Short=13]="Short",e[e.Short2=14]="Short2",e[e.Short3=15]="Short3",e[e.Short4=16]="Short4",e[e.Ushort=17]="Ushort",e[e.Ushort2=18]="Ushort2",e[e.Ushort3=19]="Ushort3",e[e.Ushort4=20]="Ushort4",e[e.Char=21]="Char",e[e.Char2=22]="Char2",e[e.Char3=23]="Char3",e[e.Char4=24]="Char4",e[e.Uchar=25]="Uchar",e[e.Uchar2=26]="Uchar2",e[e.Uchar3=27]="Uchar3",e[e.Uchar4=28]="Uchar4",e[e.Half=29]="Half",e[e.Half2=30]="Half2",e[e.Half3=31]="Half3",e[e.Half4=32]="Half4",e[e.Float3x3=33]="Float3x3",e[e.Float3x4=34]="Float3x4",e[e.Float4x4=35]="Float4x4",e[e.Texture2D=240]="Texture2D",e[e.Texture3D=241]="Texture3D",e[e.TextureCube=242]="TextureCube",e[e.Short_Norm=256]="Short_Norm",e[e.Short2_Norm=257]="Short2_Norm",e[e.Short3_Norm=258]="Short3_Norm",e[e.Short4_Norm=259]="Short4_Norm",e[e.Ushort_Norm=260]="Ushort_Norm",e[e.Ushort2_Norm=261]="Ushort2_Norm",e[e.Ushort3_Norm=262]="Ushort3_Norm",e[e.Ushort4_Norm=263]="Ushort4_Norm",e[e.Char_Norm=264]="Char_Norm",e[e.Char2_Norm=265]="Char2_Norm",e[e.Char3_Norm=266]="Char3_Norm",e[e.Char4_Norm=267]="Char4_Norm",e[e.Uchar_Norm=268]="Uchar_Norm",e[e.Uchar2_Norm=269]="Uchar2_Norm",e[e.Uchar3_Norm=270]="Uchar3_Norm",e[e.Uchar4_Norm=271]="Uchar4_Norm"}(dr||(dr={})),function(e){e[e.Texture2D=240]="Texture2D",e[e.Texture3D=241]="Texture3D",e[e.TextureCube=242]="TextureCube"}(pr||(pr={})),function(e){e[e.Undefined=0]="Undefined",e[e.U565=1]="U565",e[e.U8=2]="U8",e[e.U8_sRGB=3]="U8_sRGB",e[e.U8x2=4]="U8x2",e[e.U8x2_sRGB=5]="U8x2_sRGB",e[e.U8x3=6]="U8x3",e[e.U8x3_sRGB=7]="U8x3_sRGB",e[e.U8x4=8]="U8x4",e[e.U8x4_sRGB=9]="U8x4_sRGB",e[e.U10_10_10_2=10]="U10_10_10_2",e[e.F11_11_10=11]="F11_11_10",e[e.F16=12]="F16",e[e.F16x2=13]="F16x2",e[e.F16x3=14]="F16x3",e[e.F16x4=15]="F16x4",e[e.F32x2=16]="F32x2",e[e.F32x3=17]="F32x3",e[e.F32x4=18]="F32x4",e[e.Depth32=19]="Depth32",e[e.Depth24Stencil8=20]="Depth24Stencil8"}(mr||(mr={})),function(e){e[e.Nearest=0]="Nearest",e[e.Linear=1]="Linear"}(gr||(gr={})),function(e){e[e.Clamp=0]="Clamp",e[e.Repeat=1]="Repeat"}(br||(br={})),function(e){e[e.Never=0]="Never",e[e.Less=1]="Less",e[e.Equal=2]="Equal",e[e.LessEqual=3]="LessEqual",e[e.Greater=4]="Greater",e[e.NotEqual=5]="NotEqual",e[e.GreaterEqual=6]="GreaterEqual",e[e.Always=7]="Always"}(xr||(xr={})),function(e){e[e.Points=0]="Points",e[e.Lines=1]="Lines",e[e.LineLoop=2]="LineLoop",e[e.LineStrip=3]="LineStrip",e[e.Triangles=4]="Triangles",e[e.TriangleStrip=5]="TriangleStrip",e[e.TriangleFan=6]="TriangleFan"}(yr||(yr={})),function(e){e[e.Undefined=0]="Undefined",e[e.Uniform=1]="Uniform",e[e.Vertex=2]="Vertex",e[e.Index=3]="Index",e[e.Readback=4]="Readback"}(vr||(vr={})),function(e){e[e.Undefined=0]="Undefined",e[e.UniformBuffer=1]="UniformBuffer",e[e.Texture=2]="Texture"}(_r||(_r={})),function(e){e[e.None=0]="None",e[e.Static=1]="Static",e[e.Dynamic=2]="Dynamic"}(Mr||(Mr={})),function(e){e[e.None=0]="None",e[e.Back=1]="Back",e[e.Front=2]="Front"}(wr||(wr={})),function(e){e[e.Zero=0]="Zero",e[e.One=1]="One",e[e.Source=2]="Source",e[e.OneMinusSource=3]="OneMinusSource"}(Fr||(Fr={})),function(e){e[e.Vertex=0]="Vertex",e[e.Instance=1]="Instance"}(Tr||(Tr={}));class Er{}class Sr{constructor(e,t,r){this.defaultCullMode=e,this.defaultDepthState=t,this.renderFormat=r,this.primitives=[]}push(e){this.primitives.push(e)}}var Rr=function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},Ar=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const Nr={opaque:new Sr(wr.Back,{depthWriteEnabled:!0,depthTestEnabled:!0},{blendingEnabled:!1}),ui:new Sr(wr.None,{depthWriteEnabled:!1,depthTestEnabled:!1},{blendingEnabled:!0})},Lr=[Nr.opaque,Nr.ui];class Pr{initialize(e){for(const t in Nr){const r=Nr[t];r.defaultDepthStateId=e.createDepthStencilState(r.defaultDepthState)}}getRenderList(e){return p(Nr[e],"Expected render list "+e+" is not defined")}getRenderOutline(){return Lr}clearRenderLists(){for(const e in Nr)Nr[e].primitives.length=0}}Rr([M,Ar("design:type",Function),Ar("design:paramtypes",[Er]),Ar("design:returntype",void 0)],Pr.prototype,"initialize",null);var Ir=function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},Cr=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class Or{constructor(){this.resolutionScale=1}initialize(e){e.addFolder("Compositor").add(this,"resolutionScale",1,16,1)}render(e,t,r){this.width=Math.round(e.clientWidth*devicePixelRatio/this.resolutionScale),this.height=Math.round(e.clientHeight*devicePixelRatio/this.resolutionScale),this.width===e.width&&this.height===e.height||(e.width=this.width,e.height=this.height,t&&t.resize(e.width,e.height));const n=r.getRenderOutline();t.beginFrame(),t.bindRenderPass(0);for(const e of n)e instanceof Sr&&Br(t,e);t.endFrame(),r.clearRenderLists()}}function Br(e,t){const r=t.primitives.length;for(let n=0;n<r;n++){const r=t.primitives[n];if(e.bindPipeline(r.renderPipeline),e.bindVertices(r.vertexTable),e.bindResources(r.resourceTable),e.setCullMode(t.defaultCullMode),e.setDepthStencilState(t.defaultDepthStateId),g(r.indexBuffer)){const t=r.indexType===dr.Ushort?2:4,n=b(r.indexBuffer.byteOffset,0)/t;g(r.instanceCount)?e.drawInstanced(r.type,r.indexBuffer.buffer,p(r.indexType),n,r.elementCount,r.instanceCount):e.draw(r.type,r.indexBuffer.buffer,p(r.indexType),n,r.elementCount)}else e.drawNonIndexed(r.type,0,r.elementCount)}}Ir([M,Cr("design:type",Function),Cr("design:paramtypes",[fr]),Cr("design:returntype",void 0)],Or.prototype,"initialize",null),Ir([M,Cr("design:type",Function),Cr("design:paramtypes",[HTMLCanvasElement,Er,Pr]),Cr("design:returntype",void 0)],Or.prototype,"render",null);var Dr=r(0),Gr=r.n(Dr),jr=r(1),Vr=r.n(jr);function Hr(e){const t={};let r=0;const n=Object.keys(e);for(let a=0;a<n.length;a++){const i=e[n[a]];t[n[a]]=Object.assign(Object.assign({},i),{offset:r}),r+=Ur(i.type)*b(i.count,1)}return t}class zr{constructor(e,t,r){this.bufferSize=0,this.bufferLayout=r;const n=Object.keys(this.bufferLayout);let a=this.bufferLayout[n[0]];for(let e=1;e<n.length;e++){const t=this.bufferLayout[n[e]];t.offset>a.offset&&(a=t)}this.bufferSize=a.offset+kr(a),this.bufferData=new ArrayBuffer(this.bufferSize),this.bufferBytes=new Uint8Array(this.bufferData),this.bufferFloats=new Float32Array(this.bufferData),this.buffer=t.createBuffer(e,vr.Uniform,Mr.Dynamic,this.bufferSize)}getBufferView(){return{buffer:this.buffer,byteOffset:0}}getBufferLayout(){return this.bufferLayout}setFloat(e,t){const r=p(this.bufferLayout[e],"Attempted to set unknown uniform "+e);this.bufferFloats[r.offset/4]=t}setVec2(e,t){const r=p(this.bufferLayout[e],"Attempted to set unknown uniform "+e);this.bufferFloats.set(t,r.offset/4)}setVec3(e,t){const r=p(this.bufferLayout[e],"Attempted to set unknown uniform "+e);this.bufferFloats.set(t,r.offset/4)}setVec4(e,t){const r=p(this.bufferLayout[e],"Attempted to set unknown uniform "+e);this.bufferFloats.set(t,r.offset/4)}setMat4(e,t){const r=p(this.bufferLayout[e],"Attempted to set unknown uniform "+e);this.bufferFloats.set(t,r.offset/4)}setBytes(e,t){const r=p(this.bufferLayout[e],"Attempted to set unknown uniform "+e);if(t.length!==kr(r))throw new Error("Invalid size");this.bufferBytes.set(t,r.offset)}setFloats(e,t){const r=p(this.bufferLayout[e],"Attempted to set unknown uniform "+e);if(t.length>kr(r)/4)throw new Error("Invalid size");this.bufferFloats.set(t,r.offset/4)}getFloatArray(e){const t=this.bufferLayout[e];if(!t)throw new Error("Attempted to set unknown uniform "+e);return new Float32Array(this.bufferData,t.offset,kr(t)/4)}write(e){e.writeBufferData(this.buffer,0,this.bufferBytes)}terminate(e){e.removeBuffer(this.buffer)}}function kr(e){return Ur(e.type)*b(e.count,1)}var qr=function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},Xr=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class Wr{initialize(e){this.renderer=e,this.buffer=new zr("GlobalUniforms",this.renderer,Wr.bufferLayout),this.bufferView=this.buffer.getBufferView()}update(){this.buffer.write(this.renderer)}}Wr.bufferLayout=Hr({g_proj:{type:dr.Float4x4},g_viewProj:{type:dr.Float4x4},g_camPos:{type:dr.Float3},g_viewVec:{type:dr.Float3}}),qr([M,Xr("design:type",Function),Xr("design:paramtypes",[Er]),Xr("design:returntype",void 0)],Wr.prototype,"initialize",null),qr([M,Xr("design:type",Function),Xr("design:paramtypes",[]),Xr("design:returntype",void 0)],Wr.prototype,"update",null);class $r{constructor(e,t,r){this.resourceTable=r,this.vertexTable=t,this.renderPipeline=e,this.elementCount=0,this.type=yr.Triangles}}var Yr=function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},Qr=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class Zr{constructor(){this.name="GridShader",this.vertSource=Zr.vert.sourceCode,this.fragSource=Zr.frag.sourceCode}}Zr.vert=Gr.a,Zr.frag=Vr.a,Zr.UniformLayout=Hr({u_baseColor:{type:dr.Float4},u_lineColor:{type:dr.Float4},u_gridUnit:{type:dr.Float},u_gridRadius:{type:dr.Float}}),Zr.resourceLayout={globalUniforms:{index:0,type:_r.UniformBuffer,layout:Wr.bufferLayout},uniforms:{index:1,type:_r.UniformBuffer,layout:Zr.UniformLayout}};class Jr{constructor(){this.baseColor=i.fromValues(.3,.3,.3,1),this.lineColor=i.fromValues(1,1,1,1),this.gridUnit=100,this.gridRadius=5e3,this.enabled=!0}initialize(e,t,r){if(!e.isGfxFeatureSupported(lr.ShaderGlsl300))return console.warn("GLSL version 300 not supported, disabling DebugGrid"),void(this.enabled=!1);const n=e.createShader(new Zr),a=Zr.resourceLayout,i={buffers:[{stride:2,layout:{a_pos:{type:dr.Char2,offset:0}}}]},o=e.createRenderPipeline(n,{blendingEnabled:!1},i,a),s=new Int8Array([-1,-1,1,-1,-1,1,1,1]),u=new Uint16Array([0,2,1,1,2,3]),c=e.createBuffer("GridVertices",vr.Vertex,Mr.Static,s),f=e.createBuffer("GridIndices",vr.Index,Mr.Static,u),h=e.createResourceTable(a);this.uniforms=new zr("GridUniforms",e,Zr.UniformLayout),e.setBuffer(h,0,t.bufferView),e.setBuffer(h,1,this.uniforms.getBufferView());const l=e.createVertexTable(o);e.setVertexBuffer(l,0,{buffer:c}),this.primitive=new $r(o,l,h),this.primitive.indexBuffer={buffer:f},this.primitive.indexType=dr.Ushort,this.primitive.elementCount=6;const d=r.addFolder("DebugGrid");d.add(this,"enabled"),d.add(this,"gridUnit",1,100,10),d.add(this,"gridRadius")}render(e,t){this.enabled&&(this.uniforms.setVec4("u_baseColor",this.baseColor),this.uniforms.setVec4("u_lineColor",this.lineColor),this.uniforms.setFloat("u_gridUnit",this.gridUnit),this.uniforms.setFloat("u_gridRadius",this.gridRadius),this.uniforms.write(e),t.getRenderList("opaque").push(this.primitive))}}let Kr;function en(e){switch(e){case Kr.FLOAT:return dr.Float;case Kr.FLOAT_VEC2:return dr.Float2;case Kr.FLOAT_VEC3:return dr.Float3;case Kr.FLOAT_VEC4:return dr.Float4;case Kr.INT:return dr.Int;case Kr.INT_VEC2:return dr.Int2;case Kr.INT_VEC3:return dr.Int3;case Kr.INT_VEC4:return dr.Int4;case Kr.FLOAT_MAT3:return dr.Float3x3;case Kr.FLOAT_MAT4:return dr.Float4x4;case Kr.SAMPLER_2D:return dr.Texture2D;case Kr.SAMPLER_3D:return dr.Texture3D;case Kr.SAMPLER_CUBE:return dr.TextureCube;case Kr.UNSIGNED_INT:return dr.Uint;case Kr.UNSIGNED_INT_VEC2:return dr.Uint2;case Kr.UNSIGNED_INT_VEC3:return dr.Uint3;case Kr.UNSIGNED_INT_VEC4:return dr.Uint4;default:return gn("Unsupported WebGL type: "+e)}}function tn(e){switch(255&e){case dr.Float:return 1;case dr.Float2:return 2;case dr.Float3:return 3;case dr.Float4:return 4;case dr.Int:return 1;case dr.Int2:return 2;case dr.Int3:return 3;case dr.Int4:return 4;case dr.Uint:return 1;case dr.Uint2:return 2;case dr.Uint3:return 3;case dr.Uint4:return 4;case dr.Short:return 1;case dr.Short2:return 2;case dr.Short3:return 3;case dr.Short4:return 4;case dr.Ushort:return 1;case dr.Ushort2:return 2;case dr.Ushort3:return 3;case dr.Ushort4:return 4;case dr.Char:return 1;case dr.Char2:return 2;case dr.Char3:return 3;case dr.Char4:return 4;case dr.Uchar:return 1;case dr.Uchar2:return 2;case dr.Uchar3:return 3;case dr.Uchar4:return 4;case dr.Half:return 1;case dr.Half2:return 2;case dr.Half3:return 3;case dr.Half4:return 4;default:return gn("Unsupported type: "+e)}}function rn(e){switch(255&e){case dr.Float:case dr.Float2:case dr.Float3:case dr.Float4:return Kr.FLOAT;case dr.Int:case dr.Int2:case dr.Int3:case dr.Int4:return Kr.INT;case dr.Uint:case dr.Uint2:case dr.Uint3:case dr.Uint4:return Kr.UNSIGNED_INT;case dr.Short:case dr.Short2:case dr.Short3:case dr.Short4:return Kr.SHORT;case dr.Ushort:case dr.Ushort2:case dr.Ushort3:case dr.Ushort4:return Kr.UNSIGNED_SHORT;case dr.Char:case dr.Char2:case dr.Char3:case dr.Char4:return Kr.BYTE;case dr.Uchar:case dr.Uchar2:case dr.Uchar3:case dr.Uchar4:return Kr.UNSIGNED_BYTE;case dr.Half:case dr.Half2:case dr.Half3:case dr.Half4:return Kr.HALF_FLOAT;default:return gn("Unsupported type: "+e)}}function nn(e){switch(e){case yr.Points:return Kr.POINTS;case yr.Lines:return Kr.LINES;case yr.LineLoop:return Kr.LINE_LOOP;case yr.LineStrip:return Kr.LINE_STRIP;case yr.Triangles:return Kr.TRIANGLES;case yr.TriangleStrip:return Kr.TRIANGLE_STRIP;case yr.TriangleFan:return Kr.TRIANGLE_FAN;default:return gn("Unsupported primitive type: "+e)}}function an(e){switch(e){case dr.Short_Norm:case dr.Short2_Norm:case dr.Short3_Norm:case dr.Short4_Norm:case dr.Ushort_Norm:case dr.Ushort2_Norm:case dr.Ushort3_Norm:case dr.Ushort4_Norm:case dr.Char_Norm:case dr.Char2_Norm:case dr.Char3_Norm:case dr.Char4_Norm:case dr.Uchar_Norm:case dr.Uchar2_Norm:case dr.Uchar3_Norm:case dr.Uchar4_Norm:return!0;default:return!1}}function on(e){switch(e){case dr.Uchar:return Kr.UNSIGNED_BYTE;case dr.Uint:return Kr.UNSIGNED_INT;case dr.Ushort:return Kr.UNSIGNED_SHORT;default:return gn("Unsupported index type: "+e)}}function sn(e){switch(e){case pr.Texture2D:return Kr.TEXTURE_2D;case pr.Texture3D:return Kr.TEXTURE_3D;case pr.TextureCube:return Kr.TEXTURE_CUBE_MAP;default:return gn("Unsupported texture type: "+e)}}function un(e){switch(e){case mr.U565:return Kr.RGB;case mr.U8:return Kr.ALPHA;case mr.U8x3:case mr.U8x3_sRGB:return Kr.RGB;case mr.U8x4:case mr.U8x4_sRGB:return Kr.RGBA;case mr.F16:return Kr.ALPHA;case mr.F16x4:case mr.F32x4:return Kr.RGBA;case mr.Depth32:return Kr.DEPTH_COMPONENT;case mr.Depth24Stencil8:return Kr.DEPTH_STENCIL;default:return gn("Unsupported texel format: "+e)}}function cn(e){switch(e){case mr.U565:return Kr.RGB;case mr.U8:case mr.U8_sRGB:return Kr.RED;case mr.U8x2:case mr.U8x2_sRGB:return Kr.RG;case mr.U8x3:case mr.U8x3_sRGB:return Kr.RGB;case mr.U8x4:case mr.U8x4_sRGB:case mr.U10_10_10_2:return Kr.RGBA;case mr.F16:return Kr.RED;case mr.F16x2:return Kr.RG;case mr.F16x4:return Kr.RGBA;case mr.F32x2:return Kr.RG;case mr.F32x4:return Kr.RGBA;case mr.F11_11_10:return Kr.RGB;case mr.Depth32:return Kr.DEPTH_COMPONENT;case mr.Depth24Stencil8:return Kr.DEPTH_STENCIL;default:return gn("Unsupported texel format: "+e)}}function fn(e){switch(e){case mr.U565:return Kr.RGB565;case mr.U8:case mr.U8_sRGB:return Kr.R8;case mr.U8x2:case mr.U8x2_sRGB:return Kr.RG8;case mr.U8x3:case mr.U8x3_sRGB:return Kr.RGB8;case mr.U8x4:case mr.U8x4_sRGB:return Kr.RGBA8;case mr.U10_10_10_2:return Kr.RGB10_A2;case mr.F16:return Kr.R16F;case mr.F16x2:return Kr.RG16F;case mr.F16x3:return Kr.RGB16F;case mr.F16x4:return Kr.RGBA16F;case mr.F32x2:return Kr.RG32F;case mr.F32x3:return Kr.RGB32F;case mr.F32x4:return Kr.RGBA32F;case mr.Depth32:return Kr.DEPTH_COMPONENT32F;case mr.Depth24Stencil8:return Kr.DEPTH24_STENCIL8;default:return gn("Unsupported texel format: "+e)}}function hn(e){switch(e){case mr.Undefined:return 0;case mr.U565:return Kr.UNSIGNED_SHORT_5_6_5;case mr.U8:case mr.U8_sRGB:case mr.U8x2:case mr.U8x2_sRGB:case mr.U8x3:case mr.U8x3_sRGB:case mr.U8x4:case mr.U8x4_sRGB:return Kr.UNSIGNED_BYTE;case mr.U10_10_10_2:return Kr.RGBA;case mr.F11_11_10:return Kr.FLOAT;case mr.F16:case mr.F16x2:case mr.F16x4:return Kr.HALF_FLOAT;case mr.F32x2:case mr.F32x4:case mr.Depth32:return Kr.FLOAT;case mr.Depth24Stencil8:return Kr.UNSIGNED_INT_24_8;default:return gn("Unsupported texel format: "+e)}}function ln(e){switch(e){case gr.Nearest:return Kr.NEAREST;case gr.Linear:return Kr.LINEAR;default:return gn("Unsupported texture filter: "+e)}}function dn(e){switch(e){case br.Clamp:return Kr.CLAMP_TO_EDGE;case br.Repeat:return Kr.REPEAT;default:return gn("Unsupported texture wrap: "+e)}}function pn(e){switch(e){case Fr.Zero:return Kr.ZERO;case Fr.One:return Kr.ONE;case Fr.Source:return Kr.SRC_ALPHA;case Fr.OneMinusSource:return Kr.ONE_MINUS_SRC_ALPHA;default:return gn("Unsupported blend factor: "+e)}}function mn(e,t="Assert failed"){e||gn(t)}function gn(e){throw console.error(e),new Error(e)}function bn(e,t){return void 0!==e?e:t}function xn(e){return null!=e}function yn(e){return void 0!==e.height}function vn(e,t,r){const n=Kr.createShader(t);if(Kr.shaderSource(n,r),Kr.compileShader(n),!Kr.getShaderParameter(n,Kr.COMPILE_STATUS)){const a=t===Kr.VERTEX_SHADER?"Vertex":"Fragment",i=r.split("\n").map((e,t)=>`${t+1}: ${e}`).join("\n");console.error(i),gn(`${a} compilation failed for shader ${e}:\n  ${Kr.getShaderInfoLog(n)}. See source above.`)}return n}function _n(e,t,r){const n=e.vertexLayout.buffers[r],a=e.shader.reflection,i=Object.keys(n.layout);Kr.bindBuffer(Kr.ARRAY_BUFFER,t.buffer.glId);for(let e=0;e<i.length;e++){const r=n.layout[i[e]],o=a.attributes[i[e]];if(xn(o))if(t.buffer){const e=rn(r.type),a=an(r.type);Kr.enableVertexAttribArray(o.location),Kr.vertexAttribPointer(o.location,o.components,e,a,n.stride,r.offset+t.offset),n.stepMode===Tr.Instance&&(Kr.instancedArrays?Kr.instancedArrays.vertexAttribDivisorANGLE(o.location,1):Kr.vertexAttribDivisor(o.location,1))}else Kr.disableVertexAttribArray(o.location)}}function Mn(e){return e.type===_r.Texture}Yr([M,Qr("design:type",Function),Qr("design:paramtypes",[Er,Wr,fr]),Qr("design:returntype",void 0)],Jr.prototype,"initialize",null),Yr([M,Qr("design:type",Function),Qr("design:paramtypes",[Er,Pr]),Qr("design:returntype",void 0)],Jr.prototype,"render",null);class wn{constructor(){this.objects=[],this.freeList=[],this.count=0}get(e){const t=this.objects[e];return mn(void 0!==t,"Invalid ID"),t}create(e){++this.count;const t=this.freeList.pop();return void 0!==t?(this.objects[t]=e,t):(this.objects.push(e),this.objects.length-1)}delete(e){--this.count,delete this.objects[e],this.freeList.push(e)}}class Fn{constructor(){this.debugEnabled=!1,this.buffers=new wn,this.textures=new wn,this.shaders=new wn,this.renderPipelines=new wn,this.resourceTables=new wn,this.vertexTables=new wn,this.renderPasses=new wn,this.depthStencilStates=new wn}initialize(e){const t={alpha:!1,antialias:!1,preserveDrawingBuffer:!1};if(Kr=e.getContext("webgl2",t),Kr||(Kr=e.getContext("webgl",t)),!Kr)return!1;this.webGlVersion=Kr instanceof WebGLRenderingContext?1:2,console.debug(`Initialized WebGL${this.webGlVersion} context`),this.featureFlags=function(e){let t,r=0;return(t=Kr.getExtension("OES_vertex_array_object"))&&(r|=lr.VertexArrayObject,Kr.createVertexArray=t.createVertexArrayOES.bind(t),Kr.deleteVertexArray=t.deleteVertexArrayOES.bind(t),Kr.bindVertexArray=t.bindVertexArrayOES.bind(t)),(t=Kr.getExtension("OES_texture_half_float"))&&(r|=lr.TextureHalf,Kr.HALF_FLOAT=t.HALF_FLOAT_OES),(t=Kr.getExtension("EXT_texture_filter_anisotropic")||Kr.getExtension("MOZ_EXT_texture_filter_anisotropic")||Kr.getExtension("WEBKIT_EXT_texture_filter_anisotropic"))&&(r|=lr.AnistropicFiltering,Kr.MAX_TEXTURE_MAX_ANISOTROPY_EXT=t.MAX_TEXTURE_MAX_ANISOTROPY_EXT,Kr.TEXTURE_MAX_ANISOTROPY_EXT=t.TEXTURE_MAX_ANISOTROPY_EXT),Kr.getExtension("OES_texture_float")&&(r|=lr.TextureFloat),Kr.getExtension("OES_texture_float_linear")&&(r|=lr.TextureFloatLinearFiltering),Kr.getExtension("OES_texture_half_float_linear")&&(r|=lr.TextureHalfLinearFiltering),Kr.getExtension("OES_standard_derivatives")&&(r|=lr.ShaderDerivatives),Kr.texSubImage2D&&(r|=lr.TextureWrite),(Kr.instancedArrays=Kr.getExtension("ANGLE_instanced_arrays"))&&(r|=lr.Instancing),r|=lr.ShaderGlsl100,e>=2&&(r|=lr.VertexArrayObject,r|=lr.TextureFloat,r|=lr.TextureHalf,r|=lr.Instancing,r|=lr.ShaderGlsl300),r}(this.webGlVersion),this.defaultRenderPass=this.renderPasses.create({name:"Default",width:e.width,height:e.height}),mn(0===this.defaultRenderPass),this.current={},Kr.clearColor(0,0,0,1);const r=new Uint8Array([0,0,0,1]),n={usage:Mr.Static,type:pr.Texture2D,format:mr.U8x4,width:1,height:1},a=this.createTexture("DefaultTexture",n,r);return this.defaultTexture=this.textures.get(a),this.isGfxFeatureSupported(lr.AnistropicFiltering)&&(this.maxAnisotropy=Kr.getParameter(Kr.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),Kr.pixelStorei(Kr.UNPACK_COLORSPACE_CONVERSION_WEBGL,Kr.NONE),!0}isGfxFeatureSupported(e){return!!(this.featureFlags&e)}setDebugEnabled(e){this.debugEnabled=e}resize(e,t){const r=this.renderPasses.get(this.defaultRenderPass);r.width=e,r.height=t}beginFrame(){}endFrame(){}bindRenderPass(e){const t=this.renderPasses.get(e);Kr.bindFramebuffer(Kr.FRAMEBUFFER,t.glFramebuffer),Kr.viewport(0,0,t.width,t.height);const r=Kr.COLOR_BUFFER_BIT;Kr.clear(r)}bindPipeline(e){const t=this.renderPipelines.get(e);this.pipeline=t,this.current.shader!==t.shader&&(Kr.useProgram(t.shader.glProgram),this.current.shader=t.shader),t.renderFormat.blendingEnabled!=this.current.blending&&(this.current.blending=t.renderFormat.blendingEnabled,t.renderFormat.blendingEnabled?Kr.enable(Kr.BLEND):Kr.disable(Kr.BLEND)),!this.current.blending||this.current.srcBlendFactor==t.renderFormat.srcBlendFactor&&this.current.dstBlendFactor==t.renderFormat.dstBlendFactor||(this.current.srcBlendFactor=bn(t.renderFormat.srcBlendFactor,Fr.One),this.current.dstBlendFactor=bn(t.renderFormat.dstBlendFactor,Fr.OneMinusSource),Kr.blendFunc(pn(this.current.srcBlendFactor),pn(this.current.dstBlendFactor)))}draw(e,t,r,n,a){const i=nn(e),o=on(r),s=Ur(r),u=this.buffers.get(t);Kr.bindBuffer(Kr.ELEMENT_ARRAY_BUFFER,u.glId),Kr.drawElements(i,a,o,n*s)}drawInstanced(e,t,r,n,a,i){const o=nn(e),s=on(r),u=Ur(r),c=this.buffers.get(t);Kr.bindBuffer(Kr.ELEMENT_ARRAY_BUFFER,c.glId),Kr.instancedArrays?Kr.instancedArrays.drawElementsInstancedANGLE(o,a,s,n*u,i):Kr.drawElementsInstanced(o,a,s,n*u,i)}drawNonIndexed(e,t,r){const n=nn(e);Kr.drawArrays(n,t,r)}setDepthStencilState(e){const t=this.depthStencilStates.get(e),r=this.current.depthStencil;r&&t.depthWriteEnabled==r.depthWriteEnabled||Kr.depthMask(t.depthWriteEnabled),r&&t.depthCompareFunc==r.depthCompareFunc||Kr.depthFunc(t.depthCompareFunc),r&&t.depthTestEnabled==r.depthTestEnabled||(t.depthTestEnabled?Kr.enable(Kr.DEPTH_TEST):Kr.disable(Kr.DEPTH_TEST)),this.current.depthStencil=t}setCullMode(e){this.current.cullMode!=e&&(this.current.cullMode=e,e==wr.None?Kr.disable(Kr.CULL_FACE):(Kr.enable(Kr.CULL_FACE),Kr.cullFace(function(e){switch(e){case wr.None:return Kr.NONE;case wr.Back:return Kr.BACK;case wr.Front:return Kr.FRONT;default:return gn("Unsupported culling mode: "+e)}}(e))))}createDepthStencilState(e){const t=function(e){switch(e){case xr.Never:return Kr.NEVER;case xr.Less:return Kr.LESS;case xr.Equal:return Kr.EQUAL;case xr.LessEqual:return Kr.LEQUAL;case xr.Greater:return Kr.GREATER;case xr.NotEqual:return Kr.NOTEQUAL;case xr.GreaterEqual:return Kr.GEQUAL;case xr.Always:return Kr.ALWAYS;default:return gn("Unsupported compare func: "+e)}}(bn(e.depthCompareFunc,xr.Less));return this.depthStencilStates.create({depthTestEnabled:e.depthTestEnabled,depthWriteEnabled:e.depthWriteEnabled,depthCompareFunc:t})}createVertexTable(e){const t=this.renderPipelines.get(e);let r=null;return this.isGfxFeatureSupported(lr.VertexArrayObject)&&(r=Kr.createVertexArray()),this.vertexTables.create({pipeline:t,vao:r,buffers:[]})}removeVertexTable(e){if(this.isGfxFeatureSupported(lr.VertexArrayObject)){const t=this.vertexTables.get(e);Kr.deleteVertexArray(t.vao)}this.vertexTables.delete(e)}createResourceTable(e){return this.resourceTables.create({layout:e,buffers:[],textures:[]})}removeResourceTable(e){this.resourceTables.delete(e)}bindVertices(e){const t=this.vertexTables.get(e);if(this.debugEnabled){const e=t.pipeline.shader.name,r=t.pipeline.vertexLayout.buffers.length;for(let n=0;n<r;n++)mn(xn(t.buffers[n]),`Shader ${e} expects a vertex buffer bound at slot ${n}`)}if(this.isGfxFeatureSupported(lr.VertexArrayObject))Kr.bindVertexArray(t.vao);else for(let e=0;e<t.buffers.length;e++)_n(t.pipeline,t.buffers[e],e)}bindResources(e){const t=this.resourceTables.get(e),r=this.pipeline.uniformLayout,n=this.pipeline.shader.reflection,a=this.pipeline.shader.name;for(let e=0;e<n.uniforms.length;e++){const a=n.uniforms[e],i=r[a.name],o=p(t.buffers[i.index].buffer.cpuBuffer),s=new Float32Array(o.buffer,i.offset,a.size/4),u=this.pipeline.shader.uniformVals[a.name];if(!s.every((e,t)=>e===u[t]))switch(this.pipeline.shader.uniformVals[a.name].set(s),a.type){case dr.Float:Kr.uniform1fv(a.location,s);break;case dr.Float2:Kr.uniform2fv(a.location,s);break;case dr.Float3:Kr.uniform3fv(a.location,s);break;case dr.Float4:Kr.uniform4fv(a.location,s);break;case dr.Float3x3:Kr.uniformMatrix3fv(a.location,!1,s);break;case dr.Float4x4:Kr.uniformMatrix4fv(a.location,!1,s);break;default:gn("Unknown shader uniform type")}}for(let e=0;e<n.textureArray.length;e++){const i=n.textureArray[e],o=r[i.name].index;void 0===t.textures[o]&&console.warn(`Shader ${a} expects texture "${i.name}" (index ${o}) to be bound`);for(let e=0;e<i.count;e++){const r=t.textures[o+e]||this.defaultTexture,n=i.location+e;Kr.activeTexture(Kr.TEXTURE0+n),Kr.bindTexture(r.target,r.glId)}}}setVertexBuffer(e,t,r){const n=this.vertexTables.get(e),a={buffer:this.buffers.get(r.buffer),offset:r.byteOffset||0};mn(t<16),n.buffers[t]=a,this.isGfxFeatureSupported(lr.VertexArrayObject)&&(Kr.bindVertexArray(n.vao),_n(n.pipeline,a,t))}setBuffer(e,t,r){const n=this.resourceTables.get(e),a=this.buffers.get(r.buffer);n.buffers[t]={buffer:a,offset:r.byteOffset||0}}setTexture(e,t,r){const n=this.resourceTables.get(e),a=r?this.textures.get(r):null;n.textures[t]=a}setTextures(e,t,r){const n=this.resourceTables.get(e);for(let e=0;e<r.length;e++){const a=r[e]?this.textures.get(r[e]):null;n.textures[t+e]=a}}writeBufferData(e,t,r){const n=this.buffers.get(e);if(n.type===vr.Uniform){const e=ArrayBuffer.isView(r)?r.buffer:r,a=new Uint8Array(e);xn(n.cpuBuffer)?n.cpuBuffer.set(a,t):gn("No CPU buffer assigned to uniform buffer")}else Kr.bindBuffer(n.target,n.glId),Kr.bufferSubData(n.target,t,r)}createRenderPipeline(e,t,r,n){const a=this.shaders.get(e),i=Object.keys(n),o=i.map(e=>n[e]),s=a.reflection;if(this.debugEnabled){for(const e of i){const t=n[e];t.type===_r.UniformBuffer&&mn(void 0!==t.layout,`A BufferLayout must be provided for UniformBuffer "${e}" in the ResourceLayout passed to createRenderPipeline()to define uniform binding locations. In WebGL2/GLSL300 it may be possible to define binding locations completely within the shader`)}for(let e=0;e<s.uniforms.length;e++){const t=s.uniforms[e],r=o.find(e=>!Mn(e)&&e.layout&&e.layout[t.name]);mn(void 0!==r,`Shader '${a.name}' expects uniform '${t.name}' to be set in a uniform buffer`);const n=r.layout[t.name].type;if(mn(n===t.type,`Shader '${a.name}' expects uniform '${t.name}' to be type ${t.type} but the ShaderResourceLayout specifies type ${n}`),t.count>1){const e=p(r.layout[t.name].count,`Shader '${a.name}' expects uniform '${t.name}' to be an array but the ShaderResourceLayout specifies a scalar value`);mn(e>=t.count,`Shader '${a.name}' expects uniform '${t.name}' to be an array of length ${t.count} but the ShaderResourceLayout specifies a length of ${e}`)}}for(let e=0;e<s.textureArray.length;e++){const t=s.textureArray[e],r=o.find((e,r)=>Mn(e)&&i[r]===t.name);mn(void 0!==r,`Shader '${a.name}' expects texture '${t.name}', but it is not defined in the ShaderResourceLayout`),mn((r.count||1)===t.count,`Shader '${a.name}' expects texture '${t.name}' to be an array of length ${t.count}, but the ResourceLayout specifies length ${r.count}`)}Object.keys(s.attributes).forEach(e=>{mn(void 0!==r.buffers.find(t=>t&&void 0!==t.layout[e]),`VertexLayout does not supply attribute ${e} required by Shader '${a.name}'`)}),this.isGfxFeatureSupported(lr.Instancing)||r.buffers.forEach(e=>{mn(e.stepMode!==Tr.Instance,"Instancing is not supported by this WebGL context")})}const u={};for(let e=0;e<s.uniforms.length;e++){const t=s.uniforms[e],r=o.find(e=>!Mn(e)&&e.layout&&e.layout[t.name]);u[t.name]={offset:r.layout[t.name].offset,index:r.index}}for(let e=0;e<s.textureArray.length;e++){const t=s.textureArray[e],r=n[t.name];u[t.name]={offset:0,index:r.index}}return this.renderPipelines.create({shader:a,renderFormat:t,vertexLayout:r,resourceLayout:n,uniformLayout:u})}removeRenderPipeline(e){this.renderPipelines.delete(e)}createShader(e){return this._createShader(e.name,e.vertSource,e.fragSource)}_createShader(e,t,r){const n=function(e,t,r){const n=vn(e,Kr.VERTEX_SHADER,t),a=vn(e,Kr.FRAGMENT_SHADER,r),i=Kr.createProgram();return Kr.attachShader(i,n),Kr.attachShader(i,a),Kr.linkProgram(i),Kr.deleteShader(n),Kr.deleteShader(a),Kr.getProgramParameter(i,Kr.LINK_STATUS)||gn(`Linking failed for shader ${e}:\n  ${Kr.getProgramInfoLog(i)}`),i}(e,t instanceof Array?t.join("\n#line 0\n"):t,r instanceof Array?r.join("\n#line 0\n"):r),a=function(e){const t={},r=[],n=[],a={};let i=0;const o=Kr.getProgramParameter(e,Kr.ACTIVE_ATTRIBUTES);mn(o<16);for(let t=0;t<o;t++){const r=Kr.getActiveAttrib(e,t),n=en(r.type);a[r.name]={location:t,count:r.size,components:tn(n),glType:rn(n),type:n}}const s=Kr.getProgramParameter(e,Kr.ACTIVE_UNIFORMS);mn(s<64);for(let a=0;a<s;a++){const o=Kr.getActiveUniform(e,a),s=en(o.type),u=o.name.replace("[0]","");if(s>=pr.Texture2D&&s<=pr.TextureCube){const n={name:u,count:o.size,type:s,location:i,locationGl:Kr.getUniformLocation(e,o.name)};i+=o.size,t[u]=n,r.push(n)}else{const t={name:u,count:o.size,type:s,size:Ur(s)*o.size,location:Kr.getUniformLocation(e,o.name)};n.push(t)}}return{attributes:a,uniforms:n,textures:t,textureArray:r,textureCount:i}}(n),i={};for(let e=0;e<a.uniforms.length;e++){const t=a.uniforms[e];i[t.name]=new Float32Array(t.size/4)}Kr.useProgram(n);const o=Object.keys(a.textures);for(let e=0;e<o.length;e++){const t=a.textures[o[e]],r=Array.from(Array(t.count).keys()).map((e,r)=>t.location+r);Kr.uniform1iv(t.locationGl,r)}return this.current.shader=void 0,this.shaders.create({name:e,glProgram:n,reflection:a,uniformVals:i})}removeShader(e){const t=this.shaders.get(e);Kr.deleteProgram(t.glProgram),this.shaders.delete(e)}createTexture(e,t,r){const n=!r||r.buffer instanceof ArrayBuffer&&void 0!==r.byteLength,a=1===this.webGlVersion?un:cn,i={target:sn(t.type),format:a(t.format),internalFormat:this.webGlVersion>1?fn(t.format):a(t.format),type:hn(t.format),usage:t.usage,width:n?bn(t.width,1):r.width,height:n?bn(t.height,1):r.height,depth:t.depth||1,minFilter:ln(void 0!==t.defaultMinFilter?t.defaultMinFilter:gr.Linear),magFilter:ln(void 0!==t.defaultMagFilter?t.defaultMagFilter:gr.Linear),wrapS:dn(void 0!==t.defaultWrapS?t.defaultWrapS:br.Repeat),wrapT:dn(void 0!==t.defaultWrapT?t.defaultWrapT:br.Repeat),glId:Kr.createTexture()};if(Kr.bindTexture(i.target,i.glId),Kr.texParameteri(i.target,Kr.TEXTURE_MIN_FILTER,i.minFilter),Kr.texParameteri(i.target,Kr.TEXTURE_MAG_FILTER,i.magFilter),Kr.texParameteri(i.target,Kr.TEXTURE_WRAP_S,i.wrapS),Kr.texParameteri(i.target,Kr.TEXTURE_WRAP_T,i.wrapT),xn(t.maxAnistropy)&&t.maxAnistropy>1&&this.isGfxFeatureSupported(lr.AnistropicFiltering)){const e=Math.min(this.maxAnisotropy,t.maxAnistropy);Kr.texParameterf(Kr.TEXTURE_2D,Kr.TEXTURE_MAX_ANISOTROPY_EXT,e)}const o=this.webGlVersion>1?i.internalFormat:i.format;if(t.type===pr.Texture3D)Kr.texImage3D(i.target,0,o,i.width,i.height,i.depth,0,i.format,i.type,r);else if(n)r instanceof ArrayBuffer&&(r=new Uint8Array(r)),Kr.texImage2D(i.target,0,o,i.width,i.height,0,i.format,i.type,r);else if(void 0!==r)Kr.texImage2D(i.target,0,o,i.format,i.type,r);else{mn(void 0!==i.width&&void 0!==i.height,"Image is null. If attempting to create an empty texture, width and height must be specified"),Kr.texImage2D(i.target,0,o,t.width,t.height,0,i.format,i.type,null)}return this.textures.create(i)}writeTextureData(e,t){const r=this.textures.get(e);mn(r.target===Kr.TEXTURE_2D,"Currently only 2D textures may be written to"),Kr.bindTexture(r.target,r.glId);const n=yn(t)?t.width!==r.width:!!yn(t)&&t.height!==r.height;this.isGfxFeatureSupported(lr.TextureWrite)&&!n?yn(t)?Kr.texSubImage2D(r.target,0,0,0,r.format,r.type,t):Kr.texSubImage2D(r.target,0,0,0,r.width,r.height,r.format,r.type,t):Kr.texImage2D(r.target,0,r.internalFormat,r.format,r.type,t)}removeTexture(e){const t=this.textures.get(e);Kr.deleteTexture(t.glId),this.textures.delete(e)}createBuffer(e,t,r,n){let a,i;mn(r!=Mr.None);const o=function(e){switch(e){case vr.Undefined:return 0;case vr.Uniform:return Kr.UNIFORM_BUFFER;case vr.Vertex:return Kr.ARRAY_BUFFER;case vr.Index:return Kr.ELEMENT_ARRAY_BUFFER;case vr.Readback:return Kr.TRANSFORM_FEEDBACK_BUFFER}}(t),s=e=>Number.isInteger(e),u=e=>e instanceof ArrayBuffer,c=s(n)?null:n,f=s(n)?n:n.byteLength;if(mn(f>0||null!==c,"Either an ArrayBuffer or size must be provided"),t!=vr.Uniform)i=Kr.createBuffer(),Kr.bindBuffer(o,i),Kr.bufferData(o,n,r==Mr.Dynamic?Kr.DYNAMIC_DRAW:Kr.STATIC_DRAW);else if(c){const e=u(c)?c:c.buffer,t=u(c)?0:c.byteOffset;a=new Uint8Array(e,t,f)}else a=new Uint8Array(f);return this.buffers.create({name:e,type:t,target:o,usage:r,size:f,glId:i,cpuBuffer:a})}removeBuffer(e){const t=this.buffers.get(e);t.type!=vr.Uniform&&Kr.deleteBuffer(t.glId),this.buffers.delete(e)}readPixels(e,t,r,n,a){Kr.readPixels(e,t,r,n,Kr.RGBA,Kr.UNSIGNED_BYTE,a)}}var Tn=function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},Un=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const En={debug:e=>e.debugMenu.show()};class Sn{constructor(){this.canvas=document.createElement("canvas"),this.camera=new hr,this.gfxDevice=new Fn,this.debugMenu=new fr,this.profileHud=new ir,this.moduleBarn=new cr,this.scene=new Pr,this.globalUniforms=new Wr,this.debugGrid=new Jr,this.compositor=new Or}initialize(e){this.rootElement=document.createElement("div"),document.body.appendChild(this.rootElement),this.rootElement.appendChild(this.canvas),this.profileHud.initialize(this.rootElement,this.debugMenu),this.gfxDevice.setDebugEnabled(!1);if(!this.gfxDevice.initialize(this.canvas))return;this.gfxDevice.resize(this.canvas.width,this.canvas.height),this.onResize(),window.onresize=this.onResize.bind(this),window.onbeforeunload=this.onUnload.bind(this),window.onclick=this.onClick.bind(this),document.onvisibilitychange=this.onVisibility.bind(this);this.moduleBarn.initialize(this,["initialize","terminate","hotload","update","render"]),this.moduleBarn.callFunction("initialize",or.Forward),e.forEach((e,t)=>{const r=En[t];r&&r(this,e)}),n.lookAt(this.camera.viewMatrix,a.fromValues(0,100,500),a.fromValues(0,0,0),a.fromValues(0,1,0)),this.camera.viewMatrixUpdated(),this.globalUniforms.buffer.setMat4("g_viewProj",this.camera.viewProjMatrix)}terminate(){this.moduleBarn.callFunction("terminate",or.Reverse)}hotUnload(e){console.log("HotUnloading"),this.hotLoadData=e,this.moduleBarn.callFunction("hotload",or.Forward)}hotLoad(){console.log("HotLoaded"),this.moduleBarn.callFunction("hotload",or.Forward),this.hotLoadData=void 0}update(){ar.begin("Game.update"),this.debugMenu.update(),this.moduleBarn.callFunction("update",or.Forward),this.moduleBarn.callFunction("render",or.Forward),ar.end("Game.update"),this.profileHud.update()}onClick(e){console.log("Mouse clicked at ("+e.x+", "+e.y+")")}onResize(){console.log("Window resized to ("+window.innerWidth+", "+window.innerHeight+")"),this.canvas.style.width=window.innerWidth+"px",this.canvas.style.height=window.innerHeight+"px",this.canvas.style.position="absolute",this.camera.setPerspective(60/180*Math.PI,this.canvas.width/this.canvas.height,1,1e4)}onVisibility(){const e=document.hidden;console.log(e?"Window hidden":"Window visible")}onUnload(){console.log("Unloading"),this.terminate()}}function Rn(){console.log("Source for this build available at https://github.com/themikelester/SketchBase/tree/80fb6be2c8a5ffd2821a604f486bf9c21fc32619");const e=new URLSearchParams(window.location.search);const t=new Sn;window.game=t,t.initialize(e),window.requestAnimationFrame(An)}function An(){ar.begin("FrameStart"),window.game.update(),window.requestAnimationFrame(An)}Tn([_,Un("design:type",HTMLElement)],Sn.prototype,"rootElement",void 0),Tn([_,Un("design:type",HTMLCanvasElement)],Sn.prototype,"canvas",void 0),Tn([_,Un("design:type",hr)],Sn.prototype,"camera",void 0),Tn([_,Un("design:type",Er)],Sn.prototype,"gfxDevice",void 0),Tn([_,Un("design:type",fr)],Sn.prototype,"debugMenu",void 0),Tn([_,Un("design:type",class{})],Sn.prototype,"hotLoadData",void 0),Tn([sr,Un("design:type",Pr)],Sn.prototype,"scene",void 0),Tn([sr,Un("design:type",Wr)],Sn.prototype,"globalUniforms",void 0),Tn([sr,Un("design:type",Jr)],Sn.prototype,"debugGrid",void 0),Tn([sr,Un("design:type",Or)],Sn.prototype,"compositor",void 0),Rn()}});